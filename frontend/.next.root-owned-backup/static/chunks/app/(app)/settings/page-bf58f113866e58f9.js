(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{2426:function(e,t,s){Promise.resolve().then(s.bind(s,2219))},2219:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),r=s(2265),n=s(6463),i=s(4378),l=s(1066);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),c=(0,l.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var d=s(7385);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,l.Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),m=(0,l.Z)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var x=s(4341),h=s(883),p=s(2328),f=s(1295),g=s(495),y=s(6264);let b="DELETE";function v(){var e;let t=(0,n.useRouter)(),{user:s,logout:l,refresh:v}=(0,p.a)(),{t:j,locale:N,availableLocales:w,setLocale:k}=(0,f.Q)(),[C,M]=r.useState(""),[S,Z]=r.useState({status:"idle"}),[P,E]=r.useState(""),[A,z]=r.useState({status:"idle"}),_=r.useCallback(e=>{if(!e)return"—";let t=new Date(e);return Number.isNaN(t.getTime())?e:new Intl.DateTimeFormat(N,{month:"short",day:"numeric",year:"numeric"}).format(t)},[N]);r.useEffect(()=>{(null==s?void 0:s.email)&&!C&&M(s.email)},[null==s?void 0:s.email,C]);let D=async e=>{e.preventDefault(),Z({status:"sending"});try{let e=C.trim();if(!e){Z({status:"error",message:"Enter the email address for this account."});return}await y.iJ.forgotPassword({email:e}),Z({status:"sent",message:"Password reset instructions are on the way."})}catch(e){Z({status:"error",message:(0,y.k0)(e)?e.detail:"We couldn't send the reset email."})}},R=async()=>{z({status:"working"});try{await y.iJ.deleteAccount(),await l(),t.replace("/")}catch(e){z({status:"error",message:(0,y.k0)(e)?e.detail:"Account deletion failed. Please try again."})}},L=P.trim().toUpperCase()===b;return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:j("Settings")}),(0,a.jsx)("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:j("Profile and security controls.")}),(0,a.jsx)("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:j("Review account details, manage password access, and stay in control of your archive session.")})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:(0,a.jsxs)(g.z,{variant:"outline",onClick:()=>v(),children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),j("Refresh profile")]})})]}),(0,a.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:j("Account overview")}),(0,a.jsx)("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:j("Keep your archive identity current.")})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-medium ".concat((null==s?void 0:s.is_verified)?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"),children:[(0,a.jsx)(o,{className:"h-3.5 w-3.5"}),(null==s?void 0:s.is_verified)?j("Verified"):j("Verification pending")]})]}),(0,a.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-stone-50/80 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-stone-500",children:[(0,a.jsx)(c,{className:"h-4 w-4 text-amber-700"}),j("Email address")]}),(0,a.jsx)("p",{className:"mt-3 text-sm font-medium text-stone-900",children:null!==(e=null==s?void 0:s.email)&&void 0!==e?e:"—"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:j("Use this email to log in and receive notices.")})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-stone-50/80 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-stone-500",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-amber-700"}),j("Member since")]}),(0,a.jsx)("p",{className:"mt-3 text-sm font-medium text-stone-900",children:_(null==s?void 0:s.created_at)}),(0,a.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:j("Account created in your studio archive.")})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-stone-50/80 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-stone-500",children:[(0,a.jsx)(u,{className:"h-4 w-4 text-amber-700"}),j("Status")]}),(0,a.jsx)("p",{className:"mt-3 text-sm font-medium text-stone-900",children:(null==s?void 0:s.is_active)?j("Active"):j("Inactive")}),(0,a.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:j("Contact support if your account is inactive.")})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-stone-50/80 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-stone-500",children:[(0,a.jsx)(m,{className:"h-4 w-4 text-amber-700"}),j("Account ID")]}),(0,a.jsx)("p",{className:"mt-3 text-sm font-medium text-stone-900",children:s?"#".concat(s.id):"—"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:j("Keep this handy for support requests.")})]})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-6 text-stone-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:j("Security snapshot")}),(0,a.jsx)("h3",{className:"font-display mt-4 text-2xl",children:j("Stay protected across every session.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-300",children:j("Rotate passwords regularly and verify your email to keep access under your control.")}),(0,a.jsxs)("div",{className:"mt-6 space-y-3 text-sm text-stone-200",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"mt-1 h-2 w-2 rounded-full bg-amber-300"}),j("Password reset links expire quickly for safety.")]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"mt-1 h-2 w-2 rounded-full bg-amber-300"}),j("Verification status updates after email confirmation.")]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"mt-1 h-2 w-2 rounded-full bg-amber-300"}),j("Delete actions remove collections, items, and images.")]})]})]})]}),(0,a.jsxs)("section",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:j("Language preferences")}),(0,a.jsx)("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:j("Choose your display language.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:j("We default to your browser language. Choose another to override it.")}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"language-select",children:j("Display language")}),(0,a.jsx)("select",{id:"language-select",className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:N,onChange:e=>k(e.target.value),children:w.map(e=>(0,a.jsx)("option",{value:e,children:"de"===e?j("German"):j("English")},e))}),(0,a.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:j("Changes apply immediately and stay on this device.")})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:j("Password access")}),(0,a.jsx)("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:j("Send a reset link.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:j("We will email a secure reset link to the address below.")}),(0,a.jsxs)("form",{className:"mt-6 space-y-4",onSubmit:D,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"reset-email",children:j("Email address")}),(0,a.jsx)("input",{id:"reset-email",type:"email",autoComplete:"email",className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:C,onChange:e=>M(e.target.value)})]}),"error"===S.status&&S.message?(0,a.jsx)("div",{role:"alert",className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:j(S.message)}):null,"sent"===S.status&&S.message?(0,a.jsx)("div",{role:"status",className:"rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:j(S.message)}):null,(0,a.jsx)(g.z,{type:"submit",disabled:"sending"===S.status,children:"sending"===S.status?j("Sending..."):j("Send reset link")})]})]})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-rose-200 bg-rose-50/60 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-rose-600",children:j("Danger zone")}),(0,a.jsx)("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:j("Permanently delete this account.")}),(0,a.jsx)("p",{className:"mt-3 max-w-2xl text-sm text-rose-700",children:j("This removes all collections, items, and images tied to your account. Type {token} to confirm.",{token:b})})]}),(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-rose-100 text-rose-700",children:(0,a.jsx)(x.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-[1.4fr_0.6fr]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-rose-700",htmlFor:"delete-confirm",children:j("Confirmation phrase")}),(0,a.jsx)("input",{id:"delete-confirm",type:"text",className:"mt-2 w-full rounded-xl border border-rose-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-rose-300 focus:outline-none focus:ring-2 focus:ring-rose-200",value:P,onChange:e=>E(e.target.value),placeholder:j("Type {token} to confirm",{token:b})})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)(g.z,{type:"button",variant:"outline",className:"w-full border-rose-200 text-rose-700 hover:bg-rose-100",disabled:!L||"working"===A.status,onClick:R,children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),"working"===A.status?j("Deleting..."):j("Delete account")]})})]}),"error"===A.status&&A.message?(0,a.jsx)("div",{role:"alert",className:"mt-4 rounded-2xl border border-rose-200 bg-white/80 px-4 py-3 text-sm text-rose-700",children:j(A.message)}):null]})]})}},2328:function(e,t,s){"use strict";s.d(t,{H:function(){return l},a:function(){return o}});var a=s(7437),r=s(2265),n=s(6264);let i=r.createContext(void 0),l=e=>{let{children:t}=e,[s,l]=r.useState(null),[o,c]=r.useState("loading"),[d,u]=r.useState(null),m=r.useCallback(async()=>{c("loading"),u(null);try{let e=await n.iJ.me();l(e),c("authenticated")}catch(e){l(null),(0,n.k0)(e)&&(401===e.status||403===e.status)?c("unauthenticated"):(c("unauthenticated"),u((0,n.k0)(e)?e.detail:"Unable to reach server"))}},[]);r.useEffect(()=>{m()},[m]);let x=r.useCallback(async e=>{u(null),await n.iJ.login(e),await m()},[m]),h=r.useCallback(async()=>{u(null);try{await n.iJ.logout()}finally{l(null),c("unauthenticated")}},[]),p=r.useCallback(async()=>{await m()},[m]),f=r.useMemo(()=>({user:s,status:o,error:d,isAuthenticated:"authenticated"===o,login:x,logout:h,refresh:p}),[s,o,d,x,h,p]);return(0,a.jsx)(i.Provider,{value:f,children:t})},o=()=>{let e=r.useContext(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(7437),r=s(2265),n=s(2974),i=s(3027),l=s(7440);let o=(0,i.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},7440:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(4839),r=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=s;return(0,a.createElement)("svg",{ref:i,...r,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},7385:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},4378:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},4341:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[165,846,971,23,744],function(){return e(e.s=2426)}),_N_E=e.O()}]);