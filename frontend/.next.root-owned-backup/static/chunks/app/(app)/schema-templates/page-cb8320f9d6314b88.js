(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[594],{1754:function(e,t,s){Promise.resolve().then(s.bind(s,2394))},2394:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437),r=s(2265),n=s(7138),i=s(6463),l=s(4378),o=s(4817),c=s(2513),d=s(7833),u=s(6884),h=s(883),m=s(1295),x=s(495),p=s(6264);let f=(e,t)=>{if(!e)return"-";let s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric"}).format(s)};function y(){var e;let t=(0,i.useRouter)(),{t:s,locale:y}=(0,m.Q)(),[b,g]=r.useState(""),[v,w]=r.useState(0),[j,N]=r.useState({status:"loading",data:[]}),[k,C]=r.useState(""),[Z,S]=r.useState(null),[z,M]=r.useState(!1),[P,T]=r.useState(null),[_,L]=r.useState(null);r.useEffect(()=>{let e=!0,t=setTimeout(()=>{(async()=>{N(e=>({...e,status:"loading",error:void 0}));try{let t=await p.nK.list({q:b.trim()||void 0,limit:100});if(!e)return;N({status:"ready",data:t})}catch(t){if(!e)return;N(e=>({status:"error",data:e.data,error:(0,p.k0)(t)?t.detail:"We couldn't load your schema templates."}))}})()},250);return()=>{e=!1,clearTimeout(t)}},[b,v]);let R=async()=>{if(z)return;let e=k.trim();if(!e){S("Template name is required.");return}S(null),M(!0);try{let s=await p.nK.create({name:e});C(""),w(e=>e+1),t.push("/schema-templates/".concat(s.id))}catch(e){S((0,p.k0)(e)?e.detail:"We couldn't create the schema template.")}finally{M(!1)}},W=async e=>{if(window.confirm(s('Delete the "{name}" template? This cannot be undone.',{name:e.name}))){T(e.id);try{await p.nK.delete(e.id),N(t=>({...t,data:t.data.filter(t=>t.id!==e.id)}))}catch(e){N(t=>({...t,status:"error",error:(0,p.k0)(e)?e.detail:"We couldn't delete the schema template."}))}finally{T(null)}}},E=async e=>{if(null===_){L(e.id);try{let s=await p.nK.copy(e.id);t.push("/schema-templates/".concat(s.id))}catch(e){N(t=>({...t,status:"error",error:(0,p.k0)(e)?e.detail:"We couldn't copy the schema template."}))}finally{L(null)}}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:s("Schema templates")}),(0,a.jsx)("h1",{className:"font-display mt-3 text-3xl text-stone-900",children:s("Create reusable schema blueprints.")}),(0,a.jsx)("p",{className:"mt-2 max-w-2xl text-sm text-stone-600",children:s("Save schema definitions as templates, then apply them when creating new collections.")})]}),(0,a.jsxs)(x.z,{variant:"outline",onClick:()=>w(e=>e+1),children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),s("Refresh")]})]}),(0,a.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-[1.2fr_1fr]",children:[(0,a.jsxs)("div",{className:"relative self-start",children:[(0,a.jsx)(o.Z,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),(0,a.jsx)("input",{type:"search",placeholder:s("Search schema templates"),className:"block h-11 w-full rounded-full border border-stone-200 bg-white pl-9 pr-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:b,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:s("Template name"),className:"h-11 min-w-0 flex-1 rounded-xl border border-stone-200 bg-white px-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200"}),(0,a.jsxs)(x.z,{type:"button",onClick:R,disabled:z,children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),z?s("Creating..."):s("Create template")]})]}),Z?(0,a.jsx)("p",{className:"text-xs text-rose-600",children:s(Z)}):(0,a.jsx)("p",{className:"text-xs text-stone-500",children:s("Create a blank template, then add fields in the editor.")})]})]})]}),"loading"===j.status&&0===j.data.length?(0,a.jsx)("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/70 p-8 text-sm text-stone-500","aria-busy":"true",children:s("Loading schema templates...")}):"error"===j.status&&0===j.data.length?(0,a.jsx)("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/70 p-6 text-sm text-rose-700",children:s(null!==(e=j.error)&&void 0!==e?e:"We couldn't load your schema templates.")}):0===j.data.length?(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-8",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-stone-700",children:s("No schema templates found.")}),(0,a.jsx)("p",{className:"mt-2 text-sm text-stone-500",children:s("Create your first template to speed up new collection setup.")}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(x.z,{asChild:!0,variant:"secondary",children:(0,a.jsx)(n.default,{href:"/collections/new",children:s("New collection")})})})]}):(0,a.jsx)("section",{className:"grid gap-4 md:grid-cols-2",children:j.data.map(e=>(0,a.jsxs)("article",{className:"rounded-3xl border border-stone-200 bg-white/90 p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-stone-400",children:s("Template")}),(0,a.jsx)("h2",{className:"mt-2 text-lg font-semibold text-stone-900",children:e.name})]}),(0,a.jsx)("span",{className:"rounded-full border border-stone-200 bg-stone-50 px-3 py-1 text-xs text-stone-600",children:s("{count} fields",{count:e.field_count})})]}),(0,a.jsx)("p",{className:"mt-3 text-xs text-stone-500",children:s("Updated {date}",{date:f(e.updated_at,y)})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[(0,a.jsx)(x.z,{size:"sm",variant:"secondary",asChild:!0,children:(0,a.jsxs)(n.default,{href:"/schema-templates/".concat(e.id),children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),s("Edit schema")]})}),(0,a.jsxs)(x.z,{size:"sm",variant:"ghost",onClick:()=>E(e),disabled:null!==_,children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),_===e.id?s("Copying..."):s("Copy")]}),(0,a.jsxs)(x.z,{size:"sm",variant:"ghost",onClick:()=>W(e),disabled:P===e.id||null!==_,children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),P===e.id?s("Deleting..."):s("Delete")]})]})]},e.id))})]})}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(7437),r=s(2265),n=s(2974),i=s(3027),l=s(7440);let o=(0,i.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},7440:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(4839),r=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=s;return(0,a.createElement)("svg",{ref:i,...r,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},6884:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7833:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]])},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4378:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},4817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[165,138,846,971,23,744],function(){return e(e.s=1754)}),_N_E=e.O()}]);