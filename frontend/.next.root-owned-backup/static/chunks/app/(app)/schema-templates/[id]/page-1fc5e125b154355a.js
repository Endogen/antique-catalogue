(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{4280:function(e,t,s){Promise.resolve().then(s.bind(s,1782))},1782:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(7437),l=s(2265),r=s(7138),n=s(6463),d=s(5137),i=s(4378),c=s(6884),o=s(883),m=s(8154),u=s(1295),h=s(495),x=s(6264);let p=(e,t)=>{if(!e)return"-";let s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric"}).format(s)};function f(){var e,t,s,f,j;let g=(0,n.useParams)(),y=(0,n.useRouter)(),{t:b,locale:v}=(0,u.Q)(),N=Array.isArray(null==g?void 0:g.id)?g.id[0]:null==g?void 0:g.id,[w,k]=l.useState({status:"loading"}),[C,T]=l.useState(""),[S,_]=l.useState(null),[K,z]=l.useState(null),[F,D]=l.useState(!1),[Z,W]=l.useState(!1),[E,M]=l.useState(!1),P=l.useCallback(async()=>{if(!N){k({status:"error",error:"Schema template ID was not provided."});return}k(e=>({...e,status:"loading",error:void 0}));try{let e=await x.nK.get(N);k({status:"ready",data:e}),T(e.name)}catch(e){k({status:"error",error:(0,x.k0)(e)?e.detail:"We couldn't load this schema template."})}},[N]);l.useEffect(()=>{P()},[P]);let U=l.useMemo(()=>N?{list:()=>x.nK.listFields(N),create:e=>x.nK.createField(N,e),update:(e,t)=>x.nK.updateField(N,e,t),delete:e=>x.nK.deleteField(N,e),reorder:e=>x.nK.reorderFields(N,e)}:null,[N]),A=async()=>{if(!N||F)return;let e=C.trim();if(!e){_("Template name is required.");return}D(!0),_(null),z(null);try{let t=await x.nK.update(N,{name:e});k({status:"ready",data:t}),T(t.name),z("Template updated.")}catch(e){_((0,x.k0)(e)?e.detail:"We couldn't save the schema template.")}finally{D(!1)}},I=async()=>{if(N&&w.data&&!Z&&window.confirm(b('Delete the "{name}" template? This cannot be undone.',{name:w.data.name}))){W(!0),_(null);try{await x.nK.delete(N),y.push("/schema-templates")}catch(e){_((0,x.k0)(e)?e.detail:"We couldn't delete the schema template."),W(!1)}}},O=async()=>{if(N&&!E&&!Z){M(!0),_(null);try{let e=await x.nK.copy(N);y.push("/schema-templates/".concat(e.id))}catch(e){_((0,x.k0)(e)?e.detail:"We couldn't copy the schema template."),M(!1)}}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(h.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(r.default,{href:"/schema-templates",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),b("Back to schema templates")]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:b("Schema template")}),(0,a.jsx)("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:"ready"===w.status&&w.data?w.data.name:b("Template details")}),(0,a.jsx)("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:b("Update this template and reuse it when creating future collections.")})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(h.z,{variant:"outline",onClick:()=>P(),children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),b("Refresh")]}),(0,a.jsxs)(h.z,{variant:"ghost",onClick:O,disabled:E||Z,children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),E?b("Copying..."):b("Copy")]}),(0,a.jsxs)(h.z,{variant:"ghost",onClick:I,disabled:Z,children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),Z?b("Deleting..."):b("Delete")]})]})]}),"loading"===w.status?(0,a.jsx)("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/80 p-8 text-sm text-stone-500","aria-busy":"true",children:b("Loading schema template...")}):"error"===w.status?(0,a.jsxs)("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/80 p-6",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-rose-700",children:b("We hit a snag loading this schema template.")}),(0,a.jsx)("p",{className:"mt-2 text-sm text-rose-600",children:b(null!==(f=w.error)&&void 0!==f?f:"Please try again.")}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h.z,{variant:"outline",onClick:()=>P(),children:b("Try again")})})]}):(0,a.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:b("Template details")}),(0,a.jsx)("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:b("Manage template identity.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:b("Template names are searchable during collection creation.")}),S?(0,a.jsx)("div",{role:"alert",className:"mt-6 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:b(S)}):null,K?(0,a.jsx)("div",{role:"status",className:"mt-6 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:b(K)}):null,(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"template-name",children:b("Template name")}),(0,a.jsx)("input",{id:"template-name",type:"text",value:C,onChange:e=>T(e.target.value),className:"w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(h.z,{onClick:A,disabled:F,children:F?b("Saving changes..."):b("Save changes")})})]}),U?(0,a.jsx)(m.U,{api:U}):null]}),(0,a.jsxs)("aside",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:b("Template snapshot")}),(0,a.jsx)("h3",{className:"font-display mt-3 text-2xl text-stone-900",children:b("Quick details")}),(0,a.jsxs)("div",{className:"mt-6 space-y-2 text-sm text-stone-600",children:[(0,a.jsx)("p",{children:b("{count} fields",{count:null!==(j=null===(e=w.data)||void 0===e?void 0:e.field_count)&&void 0!==j?j:0})}),(0,a.jsx)("p",{children:b("Created {date}",{date:p(null===(t=w.data)||void 0===t?void 0:t.created_at,v)})}),(0,a.jsx)("p",{children:b("Updated {date}",{date:p(null===(s=w.data)||void 0===s?void 0:s.updated_at,v)})})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-6 text-stone-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:b("Template behavior")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-300",children:b("Collections created from this template get a copy of these fields. Future template edits do not change existing collections.")})]})]})]})]})}},6884:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(1066).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])}},function(e){e.O(0,[165,138,439,846,248,971,23,744],function(){return e(e.s=4280)}),_N_E=e.O()}]);