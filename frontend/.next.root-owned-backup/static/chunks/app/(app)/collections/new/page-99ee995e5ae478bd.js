(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{8523:function(e,t,s){Promise.resolve().then(s.bind(s,7989))},7989:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(7437),a=s(2265),n=s(7138),i=s(6463),l=s(5137),o=s(4817);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s(1066).Z)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var d=s(233),m=s(3907),u=s(6912),x=s(1295),h=s(495),p=s(6264),f=s(7440);let b=(e,t)=>({name:e.name.trim(),description:e.description.trim()?e.description.trim():null,is_public:e.is_public,schema_template_id:t});function j(){var e;let t=(0,i.useRouter)(),{t:s}=(0,x.Q)(),[j,v]=a.useState(null),[g,y]=a.useState("scratch"),[N,w]=a.useState(""),[k,C]=a.useState(null),[Z,_]=a.useState({status:"idle",data:[]});a.useEffect(()=>{if("template"!==g)return;let e=!0,t=setTimeout(()=>{(async()=>{_(e=>({...e,status:"loading",error:void 0}));try{let t=await p.nK.list({q:N.trim()||void 0,limit:50});if(!e)return;_({status:"ready",data:t})}catch(t){if(!e)return;_(e=>({...e,status:"error",error:(0,p.k0)(t)?t.detail:"We couldn't load schema templates."}))}})()},250);return()=>{e=!1,clearTimeout(t)}},[g,N]);let S=async e=>{v(null);let s="template"===g?k:null;if("template"===g&&!s){v("Select a schema template before creating the collection.");return}try{let r=await p.Wo.create(b(e,s));t.push("/collections/".concat(r.id,"/settings"))}catch(e){v((0,p.k0)(e)?e.detail:"We couldn't create the collection. Please try again.")}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("header",{className:"flex flex-wrap items-start justify-between gap-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(h.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(n.default,{href:"/collections",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),s("Back to collections")]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:s("New collection")}),(0,r.jsx)("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:s("Design the foundation for your archive.")}),(0,r.jsx)("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:s("Give the collection a clear name, describe what belongs in it, and decide whether it is visible in the public directory.")})]})]})}),(0,r.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,r.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Collection details")}),(0,r.jsx)("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:s("Capture the story you want to document.")}),(0,r.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:s("You can adjust the details later, including public visibility.")}),(0,r.jsxs)("div",{className:"mt-6 rounded-2xl border border-stone-200 bg-stone-50/80 p-4",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.25em] text-stone-500",children:s("Schema setup")}),(0,r.jsx)("p",{className:"mt-2 text-sm text-stone-600",children:s("Choose whether to start with a blank schema or copy an existing template.")}),(0,r.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[(0,r.jsxs)("button",{type:"button",className:(0,f.cn)("rounded-2xl border p-4 text-left text-sm transition","scratch"===g?"border-amber-200 bg-amber-50/80 text-stone-900":"border-stone-200 bg-white text-stone-600 hover:border-stone-300"),onClick:()=>{y("scratch"),v(null)},children:[(0,r.jsx)("p",{className:"font-medium text-stone-900",children:s("Start from scratch")}),(0,r.jsx)("p",{className:"mt-1 text-xs text-stone-500",children:s("Define fields manually after collection creation.")})]}),(0,r.jsxs)("button",{type:"button",className:(0,f.cn)("rounded-2xl border p-4 text-left text-sm transition","template"===g?"border-amber-200 bg-amber-50/80 text-stone-900":"border-stone-200 bg-white text-stone-600 hover:border-stone-300"),onClick:()=>{y("template"),v(null)},children:[(0,r.jsx)("p",{className:"font-medium text-stone-900",children:s("Use template")}),(0,r.jsx)("p",{className:"mt-1 text-xs text-stone-500",children:s("Copy fields from a saved schema template.")})]})]}),"template"===g?(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),(0,r.jsx)("input",{type:"search",value:N,onChange:e=>w(e.target.value),placeholder:s("Search schema templates"),className:"h-10 w-full rounded-xl border border-stone-200 bg-white pl-9 pr-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),"loading"===Z.status&&0===Z.data.length?(0,r.jsx)("p",{className:"text-xs text-stone-500",children:s("Loading schema templates...")}):"error"===Z.status?(0,r.jsx)("p",{className:"text-xs text-rose-600",children:s(null!==(e=Z.error)&&void 0!==e?e:"We couldn't load schema templates.")}):0===Z.data.length?(0,r.jsx)("p",{className:"text-xs text-stone-500",children:s("No schema templates found.")}):(0,r.jsx)("div",{className:"max-h-52 space-y-2 overflow-y-auto pr-1",children:Z.data.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>C(e.id),className:(0,f.cn)("w-full rounded-xl border p-3 text-left transition",k===e.id?"border-amber-300 bg-amber-50/80":"border-stone-200 bg-white hover:border-stone-300"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-stone-900",children:e.name}),(0,r.jsx)("span",{className:"text-xs text-stone-500",children:s("{count} fields",{count:e.field_count})})]})},e.id))}),(0,r.jsxs)("p",{className:"text-xs text-stone-500",children:[s("Need a new template?")," ",(0,r.jsx)(n.default,{href:"/schema-templates",className:"font-medium text-amber-700",children:s("Manage schema templates")})]})]}):null]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(u.D,{onSubmit:S,submitLabel:s("Create collection"),submitPendingLabel:s("Creating collection..."),secondaryAction:(0,r.jsx)(h.z,{variant:"ghost",type:"button",asChild:!0,children:(0,r.jsx)(n.default,{href:"/collections",children:s("Cancel")})}),formError:j})})]}),(0,r.jsxs)("aside",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("What happens next")}),(0,r.jsx)("h3",{className:"font-display mt-3 text-2xl text-stone-900",children:s("Build your schema and start cataloguing.")}),(0,r.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:s("After creating the collection, define metadata fields, then add items and images from any device.")}),(0,r.jsxs)("div",{className:"mt-6 space-y-4 text-sm text-stone-600",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-amber-100 text-amber-700",children:(0,r.jsx)(c,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-stone-900",children:s("Define fields")}),(0,r.jsx)("p",{className:"mt-1 text-xs text-stone-500",children:s("Set up condition, era, provenance, and more.")})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-stone-100 text-stone-700",children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-stone-900",children:s("Capture imagery")}),(0,r.jsx)("p",{className:"mt-1 text-xs text-stone-500",children:s("Upload photos or use the mobile camera capture button.")})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-emerald-100 text-emerald-700",children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-stone-900",children:s("Share publicly")}),(0,r.jsx)("p",{className:"mt-1 text-xs text-stone-500",children:s("Publish the collection when you are ready.")})]})]})]})]}),(0,r.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-6 text-stone-100 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:s("Studio note")}),(0,r.jsx)("p",{className:"mt-3 text-sm text-stone-300",children:s("Start with a simple collection and expand its schema once you see how you want to capture details.")})]})]})]})]})}},6912:function(e,t,s){"use strict";s.d(t,{D:function(){return h}});var r=s(7437),a=s(2265),n=s(1014),i=s(4453),l=s(874),o=s(9343),c=s(537),d=s(495),m=s(1295),u=s(7440);let x=e=>c.Ry({name:c.Z_().min(1,e("Collection name is required")).max(120,e("Keep the name under 120 characters")),description:c.Z_().max(500,e("Keep the description under 500 characters")),is_public:c.O7()});function h(e){let{initialValues:t,onSubmit:s,submitLabel:c,submitPendingLabel:h,secondaryAction:p,formError:f}=e,{t:b}=(0,m.Q)(),j=a.useMemo(()=>x(b),[b]),v=a.useMemo(()=>{var e,s,r;return{name:null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"",description:null!==(s=null==t?void 0:t.description)&&void 0!==s?s:"",is_public:null!==(r=null==t?void 0:t.is_public)&&void 0!==r&&r}},[null==t?void 0:t.description,null==t?void 0:t.is_public,null==t?void 0:t.name]),{register:g,handleSubmit:y,formState:{errors:N,isSubmitting:w},reset:k,setValue:C,watch:Z}=(0,o.cI)({resolver:(0,n.F)(j),defaultValues:v});a.useEffect(()=>{k(v)},[v,k]);let _=Z("is_public");return(0,r.jsxs)("form",{className:"space-y-6",onSubmit:y(s),children:[f?(0,r.jsx)("div",{role:"alert",className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:b(f)}):null,(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"name",children:b("Collection name")}),(0,r.jsx)("input",{id:"name",type:"text",autoComplete:"off",className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200","aria-invalid":N.name?"true":"false",...g("name")}),N.name?(0,r.jsx)("p",{className:"mt-2 text-xs text-rose-600",children:N.name.message}):null]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"description",children:b("Description")}),(0,r.jsx)("textarea",{id:"description",rows:4,className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",...g("description")}),N.description?(0,r.jsx)("p",{className:"mt-2 text-xs text-rose-600",children:N.description.message}):null,(0,r.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:b("Share the theme, era, or provenance you will capture.")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-stone-700",children:b("Visibility")}),(0,r.jsx)("p",{className:"mt-1 text-xs text-stone-500",children:b("Choose whether this collection appears in the public directory.")})]})}),(0,r.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[(0,r.jsxs)("button",{type:"button",className:(0,u.cn)("rounded-2xl border p-4 text-left text-sm transition",_?"border-stone-200 bg-white text-stone-600 hover:border-stone-300":"border-amber-200 bg-amber-50/80 text-stone-900"),onClick:()=>C("is_public",!1,{shouldDirty:!0}),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-amber-600"}),b("Private")]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:b("Only you can view and edit items.")})]}),(0,r.jsxs)("button",{type:"button",className:(0,u.cn)("rounded-2xl border p-4 text-left text-sm transition",_?"border-emerald-200 bg-emerald-50/80 text-stone-900":"border-stone-200 bg-white text-stone-600 hover:border-stone-300"),onClick:()=>C("is_public",!0,{shouldDirty:!0}),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 text-emerald-600"}),b("Public")]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-stone-500",children:b("Share read-only access with the public.")})]})]}),(0,r.jsx)("input",{type:"hidden",...g("is_public")})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[p,(0,r.jsx)(d.z,{type:"submit",disabled:w,children:w?null!=h?h:b("Saving..."):c})]})]})}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),a=s(2265),n=s(2974),i=s(3027),l=s(7440);let o=(0,i.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,r.jsx)(m,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},7440:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(4839),a=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:m="",children:u,...x}=s;return(0,r.createElement)("svg",{ref:i,...a,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(n(e)),m].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},5137:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},233:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},874:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4453:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},4817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3907:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])}},function(e){e.O(0,[165,138,439,846,971,23,744],function(){return e(e.s=8523)}),_N_E=e.O()}]);