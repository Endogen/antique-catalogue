(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{6660:function(e,t,s){Promise.resolve().then(s.bind(s,8931))},8931:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437),r=s(2265),n=s(6648),i=s(7138),l=s(6463),o=s(1014),c=s(9343),d=s(537),u=s(2328),m=s(1295),x=s(495),h=s(6264);let f=e=>d.Ry({email:d.Z_().min(1,e("Email is required")).email(e("Enter a valid email address")),password:d.Z_().min(8,e("Password must be at least 8 characters"))}),p=["Create structured collection schemas in minutes","Capture item photos from any device","Surface provenance, condition, and notes fast","Publish public collections when ready"],g=[{title:"Capture",detail:"Upload from mobile or desktop."},{title:"Curate",detail:"Publish collections with confidence."}],b=e=>{if(!e)return"/dashboard";try{let t=decodeURIComponent(e);if(t.startsWith("/")&&!t.startsWith("//"))return t}catch(e){}return"/dashboard"};function v(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),{status:s,login:d}=(0,u.a)(),{t:v}=(0,m.Q)(),[j,y]=r.useState(null),w=r.useMemo(()=>b(t.get("next")),[t]),N=r.useMemo(()=>f(v),[v]),{register:k,handleSubmit:C,formState:{errors:S,isSubmitting:E}}=(0,c.cI)({resolver:(0,o.F)(N),defaultValues:{email:"",password:""}});r.useEffect(()=>{"authenticated"===s&&e.replace(w)},[s,e,w]);let P=async e=>{y(null);try{await d(e)}catch(e){y((0,h.k0)(e)?e.detail:"We couldn't sign you in. Please try again.")}};return"authenticated"===s?(0,a.jsx)("div",{className:"col-span-full flex min-h-[60vh] items-center justify-center text-sm text-stone-500",children:v("Redirecting to your workspace...")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)(i.default,{href:"/",className:"flex items-center gap-3",children:[(0,a.jsx)(n.default,{src:"/logo.png",alt:"Antique Catalogue",width:44,height:44,className:"rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-display text-lg tracking-tight",children:v("Antique Catalogue")}),(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-stone-500",children:v("Studio Archive")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-stone-600",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:v("New here?")}),(0,a.jsx)(x.z,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(i.default,{href:"/register",children:v("Create account")})})]})]}),(0,a.jsxs)("section",{className:"mt-10 rounded-3xl border border-stone-200 bg-white/90 p-8 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:v("Welcome back")}),(0,a.jsx)("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:v("Sign in to your archive.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:v("Keep your collections, schema, and imagery in one focused workspace.")}),j?(0,a.jsx)("div",{role:"alert",className:"mt-6 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:v(j)}):null,(0,a.jsxs)("form",{className:"mt-6 space-y-5",onSubmit:C(P),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"email",children:v("Email address")}),(0,a.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200","aria-invalid":S.email?"true":"false",...k("email")}),S.email?(0,a.jsx)("p",{className:"mt-2 text-xs text-rose-600",children:S.email.message}):null]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"password",children:v("Password")}),(0,a.jsx)(i.default,{href:"/forgot-password",className:"text-xs font-medium text-amber-700 hover:text-amber-800",children:v("Forgot password?")})]}),(0,a.jsx)("input",{id:"password",type:"password",autoComplete:"current-password",className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200","aria-invalid":S.password?"true":"false",...k("password")}),S.password?(0,a.jsx)("p",{className:"mt-2 text-xs text-rose-600",children:S.password.message}):null]}),(0,a.jsx)(x.z,{type:"submit",size:"lg",className:"w-full",disabled:E,children:E?v("Signing in..."):v("Sign in")})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-stone-500",children:[(0,a.jsx)("span",{children:v("Need to verify your email first?")}),(0,a.jsx)(i.default,{href:"/verify",className:"font-medium text-amber-700 hover:text-amber-800",children:v("Enter verification token")})]})]})]}),(0,a.jsxs)("aside",{className:"order-first lg:order-none",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-8 text-stone-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-stone-400",children:v("Archive overview")}),(0,a.jsx)("h2",{className:"font-display mt-4 text-3xl",children:v("Keep provenance close at hand.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-300",children:v("Your catalogue becomes a living reference for every acquisition, with structured fields and curated imagery.")}),(0,a.jsx)("ul",{className:"mt-6 space-y-3 text-sm",children:p.map(e=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"mt-1 h-2 w-2 rounded-full bg-amber-300"}),(0,a.jsx)("span",{className:"text-stone-200",children:v(e)})]},e))})]}),(0,a.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:g.map(e=>(0,a.jsxs)("div",{className:"rounded-2xl border border-stone-200 bg-white/80 p-4 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:v(e.title)}),(0,a.jsx)("p",{className:"mt-2 text-sm text-stone-700",children:v(e.detail)})]},e.title))})]})]})}function j(){let{t:e}=(0,m.Q)();return(0,a.jsx)("div",{className:"col-span-full flex min-h-[60vh] items-center justify-center text-sm text-stone-500",children:e("Loading...")})}function y(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(j,{}),children:(0,a.jsx)(v,{})})}},2328:function(e,t,s){"use strict";s.d(t,{H:function(){return l},a:function(){return o}});var a=s(7437),r=s(2265),n=s(6264);let i=r.createContext(void 0),l=e=>{let{children:t}=e,[s,l]=r.useState(null),[o,c]=r.useState("loading"),[d,u]=r.useState(null),m=r.useCallback(async()=>{c("loading"),u(null);try{let e=await n.iJ.me();l(e),c("authenticated")}catch(e){l(null),(0,n.k0)(e)&&(401===e.status||403===e.status)?c("unauthenticated"):(c("unauthenticated"),u((0,n.k0)(e)?e.detail:"Unable to reach server"))}},[]);r.useEffect(()=>{m()},[m]);let x=r.useCallback(async e=>{u(null),await n.iJ.login(e),await m()},[m]),h=r.useCallback(async()=>{u(null);try{await n.iJ.logout()}finally{l(null),c("unauthenticated")}},[]),f=r.useCallback(async()=>{await m()},[m]),p=r.useMemo(()=>({user:s,status:o,error:d,isAuthenticated:"authenticated"===o,login:x,logout:h,refresh:f}),[s,o,d,x,h,f]);return(0,a.jsx)(i.Provider,{value:p,children:t})},o=()=>{let e=r.useContext(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(7437),r=s(2265),n=s(2974),i=s(3027),l=s(7440);let o=(0,i.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},7440:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(4839),r=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[165,138,648,439,846,971,23,744],function(){return e(e.s=6660)}),_N_E=e.O()}]);