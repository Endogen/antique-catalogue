(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{1333:function(e,t,s){Promise.resolve().then(s.bind(s,666))},666:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),r=s(2265),n=s(6648),l=s(7138),i=s(6463),o=s(1014),d=s(9343),c=s(537),u=s(2328),m=s(1295),x=s(495),h=s(6264);let f=e=>c.Ry({email:c.Z_().min(1,e("Email is required")).email(e("Enter a valid email address"))}),p=[{title:"Request",detail:"Share the email tied to your studio account."},{title:"Retrieve",detail:"Use the reset token sent to your inbox."},{title:"Reset",detail:"Set a new password and return to sign in."}];function b(){let e=(0,i.useRouter)(),{status:t}=(0,u.a)(),{t:s}=(0,m.Q)(),[c,b]=r.useState(null),[g,y]=r.useState(null),[j,v]=r.useState(null),w=r.useMemo(()=>f(s),[s]),{register:N,handleSubmit:k,formState:{errors:S,isSubmitting:C}}=(0,d.cI)({resolver:(0,o.F)(w),defaultValues:{email:""}});r.useEffect(()=>{"authenticated"===t&&e.replace("/dashboard")},[t,e]);let R=async e=>{b(null),y(null);try{let t=await h.iJ.forgotPassword({email:e.email});v(e.email),y(t.message||"If the account exists, a reset email has been sent.")}catch(e){b((0,h.k0)(e)?e.detail:"We couldn't send a reset email. Please try again.")}};if("authenticated"===t)return(0,a.jsx)("div",{className:"col-span-full flex min-h-[60vh] items-center justify-center text-sm text-stone-500",children:s("Redirecting to your workspace...")});let E=!!g;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center gap-3",children:[(0,a.jsx)(n.default,{src:"/logo.png",alt:"Antique Catalogue",width:44,height:44,className:"rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-display text-lg tracking-tight",children:s("Antique Catalogue")}),(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-stone-500",children:s("Studio Archive")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-stone-600",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:s("Remembered your password?")}),(0,a.jsx)(x.z,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(l.default,{href:"/login",children:s("Sign in")})})]})]}),(0,a.jsxs)("section",{className:"mt-10 rounded-3xl border border-stone-200 bg-white/90 p-8 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:s("Password reset")}),(0,a.jsx)("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:s("Retrieve your access.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-600",children:s("Enter the email tied to your archive. We will send a reset token you can use to set a new password.")}),c?(0,a.jsx)("div",{role:"alert",className:"mt-6 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:s(c)}):null,g?(0,a.jsxs)("div",{role:"status",className:"mt-6 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:[(0,a.jsx)("p",{className:"font-medium",children:s(g)}),j?(0,a.jsx)("p",{className:"mt-2 text-xs text-emerald-700",children:s("Reset token sent to {email}. Use it on the reset page to choose a new password.",{email:j})}):null]}):null,(0,a.jsxs)("form",{className:"mt-6 space-y-5",onSubmit:k(R),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-stone-700",htmlFor:"email",children:s("Email address")}),(0,a.jsx)("input",{id:"email",type:"email",autoComplete:"email",disabled:E,className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200 disabled:cursor-not-allowed disabled:bg-stone-100","aria-invalid":S.email?"true":"false",...N("email")}),S.email?(0,a.jsx)("p",{className:"mt-2 text-xs text-rose-600",children:S.email.message}):null]}),(0,a.jsx)(x.z,{type:"submit",size:"lg",className:"w-full",disabled:C||E,children:E?s("Check your inbox"):C?s("Sending reset email..."):s("Send reset email")})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-3 text-xs text-stone-500",children:[(0,a.jsx)("span",{children:s("Already have a token?")}),(0,a.jsx)(l.default,{href:"/reset-password",className:"font-medium text-amber-700 hover:text-amber-800",children:s("Reset your password")})]})]})]}),(0,a.jsxs)("aside",{className:"order-first lg:order-none",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-8 text-stone-100 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-stone-400",children:s("Reset flow")}),(0,a.jsx)("h2",{className:"font-display mt-4 text-3xl",children:s("Regain control in minutes.")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-300",children:s("Keep your archive secure with a short reset workflow designed to get you back in quickly.")}),(0,a.jsx)("ul",{className:"mt-6 space-y-4 text-sm",children:p.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-amber-200 text-sm font-semibold text-stone-900",children:["0",t+1]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-stone-100",children:s(e.title)}),(0,a.jsx)("p",{className:"mt-1 text-xs text-stone-300",children:s(e.detail)})]})]},e.title))})]}),(0,a.jsxs)("div",{className:"mt-6 rounded-3xl border border-stone-200 bg-white/85 p-6 shadow-sm",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Security note")}),(0,a.jsx)("p",{className:"mt-3 text-sm text-stone-700",children:s("For privacy, we always respond with the same message even if the address is not on file.")})]})]})]})}},2328:function(e,t,s){"use strict";s.d(t,{H:function(){return i},a:function(){return o}});var a=s(7437),r=s(2265),n=s(6264);let l=r.createContext(void 0),i=e=>{let{children:t}=e,[s,i]=r.useState(null),[o,d]=r.useState("loading"),[c,u]=r.useState(null),m=r.useCallback(async()=>{d("loading"),u(null);try{let e=await n.iJ.me();i(e),d("authenticated")}catch(e){i(null),(0,n.k0)(e)&&(401===e.status||403===e.status)?d("unauthenticated"):(d("unauthenticated"),u((0,n.k0)(e)?e.detail:"Unable to reach server"))}},[]);r.useEffect(()=>{m()},[m]);let x=r.useCallback(async e=>{u(null),await n.iJ.login(e),await m()},[m]),h=r.useCallback(async()=>{u(null);try{await n.iJ.logout()}finally{i(null),d("unauthenticated")}},[]),f=r.useCallback(async()=>{await m()},[m]),p=r.useMemo(()=>({user:s,status:o,error:c,isAuthenticated:"authenticated"===o,login:x,logout:h,refresh:f}),[s,o,c,x,h,f]);return(0,a.jsx)(l.Provider,{value:p,children:t})},o=()=>{let e=r.useContext(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(7437),r=s(2265),n=s(2974),l=s(3027),i=s(7440);let o=(0,l.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:l,className:s})),ref:t,...c})});d.displayName="Button"},7440:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(4839),r=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[165,138,648,439,846,971,23,744],function(){return e(e.s=1333)}),_N_E=e.O()}]);