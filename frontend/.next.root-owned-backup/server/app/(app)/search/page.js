(()=>{var e={};e.id=664,e.ids=[664],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5487:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(577),s(639),s(5866),s(9157);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),o=s(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let c=["",{children:["(app)",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,577)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/search/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,639)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9157)),"/home/endogen/projects/antique-catalogue/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/endogen/projects/antique-catalogue/frontend/app/(app)/search/page.tsx"],m="/(app)/search/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2006:(e,t,s)=>{Promise.resolve().then(s.bind(s,5253))},5253:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(326),a=s(7577),n=s(5047),l=s(1468),o=s(8307),i=s(6407),c=s(6115),d=s(772),m=s(6824);let u=(e,t)=>{if(!e)return"-";let s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric"}).format(s)};function x(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),{t:s,locale:x}=(0,c.Q)(),h=t.get("query")??"",[p,g]=a.useState(h),[f,b]=a.useState({status:"idle",data:[]}),j=a.useCallback(async e=>{b({status:"loading",data:[]});try{let t=await m.Ue.items(e);b({status:"ready",data:t})}catch(e){b({status:"error",data:[],error:(0,m.k0)(e)?e.detail:"We couldn't load search results."})}},[]);return a.useEffect(()=>{g(h);let e=h.trim();if(!e){b({status:"idle",data:[]});return}j(e)},[h,j]),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("header",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:s("Search")}),r.jsx("h1",{className:"font-display mt-3 text-3xl text-stone-900",children:s("Search your items.")}),r.jsx("p",{className:"mt-2 text-sm text-stone-600",children:s("Find items across every collection by name or notes.")})]}),(0,r.jsxs)(d.z,{variant:"outline",onClick:()=>{let e=h.trim();e&&j(e)},children:[r.jsx(l.Z,{className:"h-4 w-4"}),s("Refresh")]})]}),(0,r.jsxs)("form",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:t=>{t.preventDefault();let s=p.trim();if(!s){b({status:"idle",data:[]});return}e.push(`/search?query=${encodeURIComponent(s)}`)},children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),r.jsx("input",{type:"search",placeholder:s("Search items by name or notes"),className:"h-11 w-full rounded-full border border-stone-200 bg-white pl-9 pr-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:p,onChange:e=>g(e.target.value)})]}),r.jsx(d.z,{type:"submit",className:"sm:w-auto",children:s("Search")})]})]}),"idle"===f.status?r.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/70 p-8 text-sm text-stone-500",children:s("Enter a search term to see matching items.")}):"loading"===f.status?r.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/70 p-8 text-sm text-stone-500","aria-busy":"true",children:s("Searching items...")}):"error"===f.status?r.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/70 p-6 text-sm text-rose-700",children:s(f.error??"We couldn't load search results.")}):0===f.data.length?(0,r.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/70 p-8",children:[r.jsx("p",{className:"text-sm font-medium text-stone-700",children:s("No items matched your search.")}),r.jsx("p",{className:"mt-2 text-sm text-stone-500",children:s("Try another term or check spelling.")})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Results")}),r.jsx("span",{className:"text-xs text-stone-400",children:s("{count} items found",{count:f.data.length})})]}),r.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:f.data.map(e=>{let t=e.primary_image_id??null,a=e.image_count??0,n=1===a?s("{count} image",{count:a}):s("{count} images",{count:a});return r.jsx(i.x,{href:`/collections/${e.collection_id}/items/${e.id}`,title:e.name,eyebrow:e.collection_name,createdLabel:s("Added {date}",{date:u(e.created_at,x)}),description:e.notes,descriptionFallback:s("No description provided."),metadataFallback:s("Open item details for full metadata."),imageSrc:t?m.Rf.url(t,"medium"):null,imageAlt:e.name,imageFallbackLabel:s("No image"),imageCount:a,imageCountLabel:n,isHighlighted:e.is_highlight,highlightClassName:"border-amber-400 ring-2 ring-amber-300/70 shadow-[0_0_0_1px_rgba(251,191,36,0.85),0_0_28px_2px_rgba(217,119,6,0.25)]",openLabel:s("Open")},`${e.collection_id}-${e.id}`)})})]})]})}function h(){let{t:e}=(0,c.Q)();return r.jsx("div",{className:"flex min-h-[60vh] items-center justify-center text-sm text-stone-500",children:e("Loading...")})}function p(){return r.jsx(a.Suspense,{fallback:r.jsx(h,{}),children:r.jsx(x,{})})}},6407:(e,t,s)=>{"use strict";s.d(t,{x:()=>u});var r=s(326),a=s(434),n=s(6226),l=s(1709),o=s(3734);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(6557).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var c=s(1708),d=s(7863);let m=(e,t)=>e.length<=t?e:`${e.slice(0,t)}...`;function u({href:e,title:t,eyebrow:s,createdLabel:u,description:x,descriptionFallback:h,metadata:p=[],metadataFallback:g,metadataOverflowLabel:f,imageSrc:b,imageAlt:j,imageFallbackLabel:y,starCount:v,imageCount:N,imageCountLabel:w,isHighlighted:_=!1,highlightClassName:k,onToggleStar:P,isStarred:q=!1,starDisabled:R=!1,openLabel:S,className:L}){let C=m(t,70),M=x?.trim()?m(x,180):h,U=p.slice(0,2),Z=p.length>U.length,$=(0,c.N)(b??null);return(0,r.jsxs)("article",{className:(0,d.cn)("flex h-full min-h-[31rem] flex-col rounded-3xl border border-stone-200 bg-white/90 p-5 shadow-sm",_?k:null,L),children:[(0,r.jsxs)(a.default,{href:e,className:"flex flex-1 flex-col",children:[r.jsx("div",{className:"h-44 overflow-hidden rounded-2xl border border-stone-100 bg-stone-50",children:$?r.jsx(n.default,{src:$,alt:j??t,width:640,height:352,className:"block h-full w-full object-cover",unoptimized:!0}):(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2 bg-gradient-to-br from-stone-100 via-stone-50 to-amber-100/50 text-stone-500",children:[r.jsx(l.Z,{className:"h-5 w-5 text-amber-700"}),r.jsx("p",{className:"text-xs uppercase tracking-[0.2em]",children:y})]})}),r.jsx("p",{className:"mt-4 text-[10px] font-medium uppercase tracking-[0.3em] text-stone-400",children:s}),r.jsx("h3",{className:"mt-2 min-h-[3.25rem] text-lg font-semibold leading-snug text-stone-900",children:C}),r.jsx("p",{className:"mt-1 min-h-[1.25rem] text-xs text-stone-500",children:u??"\xa0"}),r.jsx("p",{className:"mt-3 min-h-[3.5rem] text-sm text-stone-600",children:M}),r.jsx("div",{className:"mt-4 h-24 rounded-2xl border border-stone-100 bg-stone-50 px-3 py-3 text-xs text-stone-600",children:0===U.length?r.jsx("p",{className:"text-stone-500",children:g}):(0,r.jsxs)("div",{className:"space-y-2",children:[U.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("span",{className:"font-medium text-stone-700",children:m(e.label,24)}),r.jsx("span",{className:"text-right text-stone-500",children:m(e.value,28)})]},`${e.label}-${e.value}`)),Z?r.jsx("p",{className:"text-[11px] text-stone-400",children:f??`+${p.length-U.length} more`}):null]})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:["number"==typeof v?P?(0,r.jsxs)("button",{type:"button",className:(0,d.cn)("inline-flex items-center gap-1 rounded-full border border-stone-200 bg-stone-50 px-2.5 py-1 text-xs font-medium text-stone-600 transition","hover:border-amber-300 hover:text-amber-700",R?"cursor-not-allowed opacity-60":null),onClick:P,disabled:R,children:[r.jsx(o.Z,{className:(0,d.cn)("h-3.5 w-3.5",q?"fill-current text-amber-600":"text-amber-600")}),v]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-stone-200 bg-stone-50 px-2.5 py-1 text-xs font-medium text-stone-600",children:[r.jsx(o.Z,{className:"h-3.5 w-3.5 text-amber-600"}),v]}):null,"number"==typeof N?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-stone-200 bg-stone-50 px-2.5 py-1 text-xs font-medium text-stone-600",children:[r.jsx(l.Z,{className:"h-3.5 w-3.5 text-amber-600"}),"string"==typeof w&&w.trim()?w:N]}):null]}),(0,r.jsxs)(a.default,{href:e,className:"inline-flex items-center gap-1 text-xs font-medium uppercase tracking-[0.2em] text-stone-500 transition hover:text-stone-900",children:[S,r.jsx(i,{className:"h-3.5 w-3.5"})]})]})]})}},1708:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});var r=s(7577);function a(e){let[t,s]=r.useState(null);return r.useEffect(()=>{if(!e){s(e=>(e&&URL.revokeObjectURL(e),null));return}let t=null,r=new AbortController;return(async()=>{try{let a=await fetch(e,{headers:{},cache:"no-store",signal:r.signal});if(!a.ok){s(null);return}let n=await a.blob();t=URL.createObjectURL(n),s(e=>(e&&URL.revokeObjectURL(e),t))}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;s(null)}})(),()=>{r.abort(),t&&URL.revokeObjectURL(t)}},[e]),t}},1709:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(6557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},1468:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(6557).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var r=s(8570);let a=(0,r.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/search/page.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let o=(0,r.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/search/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[716,697,449,373],()=>s(5487));module.exports=r})();