(()=>{var e={};e.id=329,e.ids=[329],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1531:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(3026),s(639),s(5866),s(9157);var a=s(3191),n=s(8716),r=s(7922),l=s.n(r),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["(app)",{children:["collections",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3026)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,639)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9157)),"/home/endogen/projects/antique-catalogue/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/new/page.tsx"],m="/(app)/collections/new/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(app)/collections/new/page",pathname:"/collections/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1829:(e,t,s)=>{Promise.resolve().then(s.bind(s,5471))},5471:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(326),n=s(7577),r=s(434),l=s(5047),i=s(6333),o=s(8307);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,s(6557).Z)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var d=s(1896),m=s(1572),x=s(4371),p=s(6115),u=s(772),h=s(6824),b=s(7863);let f=(e,t)=>({name:e.name.trim(),description:e.description.trim()?e.description.trim():null,is_public:e.is_public,schema_template_id:t});function g(){let e=(0,l.useRouter)(),{t}=(0,p.Q)(),[s,g]=n.useState(null),[j,y]=n.useState("scratch"),[v,N]=n.useState(""),[w,_]=n.useState(null),[k,P]=n.useState({status:"idle",data:[]});n.useEffect(()=>{if("template"!==j)return;let e=!0,t=setTimeout(()=>{(async()=>{P(e=>({...e,status:"loading",error:void 0}));try{let t=await h.nK.list({q:v.trim()||void 0,limit:50});if(!e)return;P({status:"ready",data:t})}catch(t){if(!e)return;P(e=>({...e,status:"error",error:(0,h.k0)(t)?t.detail:"We couldn't load schema templates."}))}})()},250);return()=>{e=!1,clearTimeout(t)}},[j,v]);let C=async t=>{g(null);let s="template"===j?w:null;if("template"===j&&!s){g("Select a schema template before creating the collection.");return}try{let a=await h.Wo.create(f(t,s));e.push(`/collections/${a.id}/settings`)}catch(e){g((0,h.k0)(e)?e.detail:"We couldn't create the collection. Please try again.")}};return(0,a.jsxs)("div",{className:"space-y-8",children:[a.jsx("header",{className:"flex flex-wrap items-start justify-between gap-6",children:(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(u.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(r.default,{href:"/collections",children:[a.jsx(i.Z,{className:"h-4 w-4"}),t("Back to collections")]})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:t("New collection")}),a.jsx("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:t("Design the foundation for your archive.")}),a.jsx("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:t("Give the collection a clear name, describe what belongs in it, and decide whether it is visible in the public directory.")})]})]})}),(0,a.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:t("Collection details")}),a.jsx("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:t("Capture the story you want to document.")}),a.jsx("p",{className:"mt-3 text-sm text-stone-600",children:t("You can adjust the details later, including public visibility.")}),(0,a.jsxs)("div",{className:"mt-6 rounded-2xl border border-stone-200 bg-stone-50/80 p-4",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-stone-500",children:t("Schema setup")}),a.jsx("p",{className:"mt-2 text-sm text-stone-600",children:t("Choose whether to start with a blank schema or copy an existing template.")}),(0,a.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("button",{type:"button",className:(0,b.cn)("rounded-2xl border p-4 text-left text-sm transition","scratch"===j?"border-amber-200 bg-amber-50/80 text-stone-900":"border-stone-200 bg-white text-stone-600 hover:border-stone-300"),onClick:()=>{y("scratch"),g(null)},children:[a.jsx("p",{className:"font-medium text-stone-900",children:t("Start from scratch")}),a.jsx("p",{className:"mt-1 text-xs text-stone-500",children:t("Define fields manually after collection creation.")})]}),(0,a.jsxs)("button",{type:"button",className:(0,b.cn)("rounded-2xl border p-4 text-left text-sm transition","template"===j?"border-amber-200 bg-amber-50/80 text-stone-900":"border-stone-200 bg-white text-stone-600 hover:border-stone-300"),onClick:()=>{y("template"),g(null)},children:[a.jsx("p",{className:"font-medium text-stone-900",children:t("Use template")}),a.jsx("p",{className:"mt-1 text-xs text-stone-500",children:t("Copy fields from a saved schema template.")})]})]}),"template"===j?(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),a.jsx("input",{type:"search",value:v,onChange:e=>N(e.target.value),placeholder:t("Search schema templates"),className:"h-10 w-full rounded-xl border border-stone-200 bg-white pl-9 pr-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),"loading"===k.status&&0===k.data.length?a.jsx("p",{className:"text-xs text-stone-500",children:t("Loading schema templates...")}):"error"===k.status?a.jsx("p",{className:"text-xs text-rose-600",children:t(k.error??"We couldn't load schema templates.")}):0===k.data.length?a.jsx("p",{className:"text-xs text-stone-500",children:t("No schema templates found.")}):a.jsx("div",{className:"max-h-52 space-y-2 overflow-y-auto pr-1",children:k.data.map(e=>a.jsx("button",{type:"button",onClick:()=>_(e.id),className:(0,b.cn)("w-full rounded-xl border p-3 text-left transition",w===e.id?"border-amber-300 bg-amber-50/80":"border-stone-200 bg-white hover:border-stone-300"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-stone-900",children:e.name}),a.jsx("span",{className:"text-xs text-stone-500",children:t("{count} fields",{count:e.field_count})})]})},e.id))}),(0,a.jsxs)("p",{className:"text-xs text-stone-500",children:[t("Need a new template?")," ",a.jsx(r.default,{href:"/schema-templates",className:"font-medium text-amber-700",children:t("Manage schema templates")})]})]}):null]}),a.jsx("div",{className:"mt-6",children:a.jsx(x.D,{onSubmit:C,submitLabel:t("Create collection"),submitPendingLabel:t("Creating collection..."),secondaryAction:a.jsx(u.z,{variant:"ghost",type:"button",asChild:!0,children:a.jsx(r.default,{href:"/collections",children:t("Cancel")})}),formError:s})})]}),(0,a.jsxs)("aside",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:t("What happens next")}),a.jsx("h3",{className:"font-display mt-3 text-2xl text-stone-900",children:t("Build your schema and start cataloguing.")}),a.jsx("p",{className:"mt-3 text-sm text-stone-600",children:t("After creating the collection, define metadata fields, then add items and images from any device.")}),(0,a.jsxs)("div",{className:"mt-6 space-y-4 text-sm text-stone-600",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-amber-100 text-amber-700",children:a.jsx(c,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-stone-900",children:t("Define fields")}),a.jsx("p",{className:"mt-1 text-xs text-stone-500",children:t("Set up condition, era, provenance, and more.")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-stone-100 text-stone-700",children:a.jsx(d.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-stone-900",children:t("Capture imagery")}),a.jsx("p",{className:"mt-1 text-xs text-stone-500",children:t("Upload photos or use the mobile camera capture button.")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-emerald-100 text-emerald-700",children:a.jsx(m.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-stone-900",children:t("Share publicly")}),a.jsx("p",{className:"mt-1 text-xs text-stone-500",children:t("Publish the collection when you are ready.")})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-6 text-stone-100 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:t("Studio note")}),a.jsx("p",{className:"mt-3 text-sm text-stone-300",children:t("Start with a simple collection and expand its schema once you see how you want to capture details.")})]})]})]})]})}},4371:(e,t,s)=>{"use strict";s.d(t,{D:()=>u});var a=s(326),n=s(7577),r=s(4064),l=s(9015),i=s(8332),o=s(4723),c=s(770),d=s(772),m=s(6115),x=s(7863);let p=e=>c.Ry({name:c.Z_().min(1,e("Collection name is required")).max(120,e("Keep the name under 120 characters")),description:c.Z_().max(500,e("Keep the description under 500 characters")),is_public:c.O7()});function u({initialValues:e,onSubmit:t,submitLabel:s,submitPendingLabel:c,secondaryAction:u,formError:h}){let{t:b}=(0,m.Q)(),f=n.useMemo(()=>p(b),[b]),g=n.useMemo(()=>({name:e?.name??"",description:e?.description??"",is_public:e?.is_public??!1}),[e?.description,e?.is_public,e?.name]),{register:j,handleSubmit:y,formState:{errors:v,isSubmitting:N},reset:w,setValue:_,watch:k}=(0,o.cI)({resolver:(0,r.F)(f),defaultValues:g});n.useEffect(()=>{w(g)},[g,w]);let P=k("is_public");return(0,a.jsxs)("form",{className:"space-y-6",onSubmit:y(t),children:[h?a.jsx("div",{role:"alert",className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:b(h)}):null,(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-stone-700",htmlFor:"name",children:b("Collection name")}),a.jsx("input",{id:"name",type:"text",autoComplete:"off",className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200","aria-invalid":v.name?"true":"false",...j("name")}),v.name?a.jsx("p",{className:"mt-2 text-xs text-rose-600",children:v.name.message}):null]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-stone-700",htmlFor:"description",children:b("Description")}),a.jsx("textarea",{id:"description",rows:4,className:"mt-2 w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",...j("description")}),v.description?a.jsx("p",{className:"mt-2 text-xs text-rose-600",children:v.description.message}):null,a.jsx("p",{className:"mt-2 text-xs text-stone-500",children:b("Share the theme, era, or provenance you will capture.")})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-stone-700",children:b("Visibility")}),a.jsx("p",{className:"mt-1 text-xs text-stone-500",children:b("Choose whether this collection appears in the public directory.")})]})}),(0,a.jsxs)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("button",{type:"button",className:(0,x.cn)("rounded-2xl border p-4 text-left text-sm transition",P?"border-stone-200 bg-white text-stone-600 hover:border-stone-300":"border-amber-200 bg-amber-50/80 text-stone-900"),onClick:()=>_("is_public",!1,{shouldDirty:!0}),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[a.jsx(l.Z,{className:"h-4 w-4 text-amber-600"}),b("Private")]}),a.jsx("p",{className:"mt-2 text-xs text-stone-500",children:b("Only you can view and edit items.")})]}),(0,a.jsxs)("button",{type:"button",className:(0,x.cn)("rounded-2xl border p-4 text-left text-sm transition",P?"border-emerald-200 bg-emerald-50/80 text-stone-900":"border-stone-200 bg-white text-stone-600 hover:border-stone-300"),onClick:()=>_("is_public",!0,{shouldDirty:!0}),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[a.jsx(i.Z,{className:"h-4 w-4 text-emerald-600"}),b("Public")]}),a.jsx("p",{className:"mt-2 text-xs text-stone-500",children:b("Share read-only access with the public.")})]})]}),a.jsx("input",{type:"hidden",...j("is_public")})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[u,a.jsx(d.z,{type:"submit",disabled:N,children:N?c??b("Saving..."):s})]})]})}},6333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1896:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},8332:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},9015:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},3026:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});var a=s(8570);let n=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/new/page.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let i=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/new/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[716,697,419,449,373],()=>s(1531));module.exports=a})();