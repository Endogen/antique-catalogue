(()=>{var e={};e.id=143,e.ids=[143],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},43:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),s(7143),s(639),s(5866),s(9157);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["(app)",{children:["collections",{children:["[id]",{children:["items",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7143)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/items/new/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,639)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9157)),"/home/endogen/projects/antique-catalogue/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/items/new/page.tsx"],x="/(app)/collections/[id]/items/new/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/collections/[id]/items/new/page",pathname:"/collections/[id]/items/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7109:(e,t,s)=>{Promise.resolve().then(s.bind(s,3328))},3328:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(326),r=s(7577),n=s(434),i=s(5047),o=s(6333),l=s(1468),d=s(210),c=s(4127),x=s(6115),m=s(772),h=s(6824);function p(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),{t:s}=(0,x.Q)(),p=Array.isArray(e?.id)?e.id[0]:e?.id,[u,g]=r.useState({status:"loading"}),[f,j]=r.useState({status:"loading",data:[]}),[y,b]=r.useState(null),v=r.useCallback(async()=>{if(!p){g({status:"error",error:"Collection ID was not provided."});return}g({status:"loading"});try{let e=await h.Wo.get(p);g({status:"ready",data:e})}catch(e){g({status:"error",error:(0,h.k0)(e)?e.detail:"We couldn't load this collection."})}},[p]),N=r.useCallback(async()=>{if(!p){j({status:"error",data:[],error:"Collection ID was not provided."});return}j(e=>({...e,status:"loading",error:void 0}));try{let e=await h.cK.list(p);j({status:"ready",data:e})}catch(e){j({status:"error",data:[],error:(0,h.k0)(e)?e.detail:"We couldn't load the collection schema."})}},[p]);r.useEffect(()=>{v(),N()},[v,N]);let w=async e=>{if(p){b(null);try{let s=await h.zg.create(p,{name:e.name,notes:e.notes,metadata:e.metadata,is_highlight:e.is_highlight});t.push(`/collections/${p}/items/${s.id}`)}catch(e){b((0,h.k0)(e)?e.detail:"We couldn't create this item. Please try again.")}}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(m.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(n.default,{href:`/collections/${p??""}`,children:[a.jsx(o.Z,{className:"h-4 w-4"}),s("Back to collection")]})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:s("New item")}),a.jsx("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:s("Capture a new item for your archive.")}),a.jsx("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:s("Record the item name, optional notes, and the metadata fields you defined in your schema.")})]})]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:(0,a.jsxs)(m.z,{variant:"outline",onClick:N,children:[a.jsx(l.Z,{className:"h-4 w-4"}),s("Reload schema")]})})]}),"loading"===u.status?a.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/80 p-8 text-sm text-stone-500","aria-busy":"true",children:s("Loading collection details...")}):"error"===u.status?(0,a.jsxs)("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/80 p-6",children:[a.jsx("p",{className:"text-sm font-medium text-rose-700",children:s("We hit a snag loading this collection.")}),a.jsx("p",{className:"mt-2 text-sm text-rose-600",children:s(u.error??"Please try again.")}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[a.jsx(m.z,{variant:"outline",onClick:v,children:s("Try again")}),a.jsx(m.z,{variant:"ghost",asChild:!0,children:a.jsx(n.default,{href:"/collections",children:s("Back to collections")})})]})]}):(0,a.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Item details")}),a.jsx("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:u.data?.name}),a.jsx("p",{className:"mt-3 text-sm text-stone-600",children:u.data?.description??s("Add a description to capture the story behind this collection.")}),a.jsx("div",{className:"mt-6",children:"loading"===f.status?a.jsx("div",{className:"rounded-2xl border border-dashed border-stone-200 bg-white/70 p-6 text-sm text-stone-500",children:s("Loading schema fields...")}):"error"===f.status?(0,a.jsxs)("div",{className:"space-y-3 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:[a.jsx("p",{children:s(f.error??"We couldn't load the schema fields. Please try again.")}),a.jsx(m.z,{size:"sm",variant:"outline",onClick:N,children:s("Try again")})]}):a.jsx(c.W,{fields:f.data,onSubmit:w,submitLabel:s("Create item"),submitPendingLabel:s("Creating item..."),secondaryAction:a.jsx(m.z,{variant:"ghost",type:"button",asChild:!0,children:a.jsx(n.default,{href:`/collections/${p}`,children:s("Cancel")})}),formError:y})})]}),(0,a.jsxs)("aside",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Schema snapshot")}),"loading"===f.status?a.jsx("p",{className:"mt-4 text-sm text-stone-500",children:s("Loading schema fields...")}):"error"===f.status?a.jsx("p",{className:"mt-4 text-sm text-rose-600",children:s(f.error??"We couldn't load schema fields.")}):0===f.data.length?(0,a.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-stone-600",children:[a.jsx("p",{children:s("No schema fields yet.")}),a.jsx(m.z,{size:"sm",variant:"secondary",asChild:!0,children:a.jsx(n.default,{href:`/collections/${p}/settings`,children:s("Define schema")})})]}):(0,a.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-stone-600",children:[a.jsx("p",{children:s("{count} fields available.",{count:f.data.length})}),(0,a.jsxs)("div",{className:"space-y-2",children:[f.data.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("span",{className:"font-medium text-stone-900",children:e.name}),a.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-stone-400",children:e.field_type})]},e.id)),f.data.length>5?a.jsx("p",{className:"text-xs text-stone-400",children:s("+{count} more fields",{count:f.data.length-5})}):null]}),a.jsx(m.z,{size:"sm",variant:"ghost",asChild:!0,children:a.jsx(n.default,{href:`/collections/${p}/settings`,children:s("Edit schema")})})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-6 text-stone-100 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:s("Capture notes")}),a.jsx("h3",{className:"font-display mt-3 text-2xl text-stone-100",children:s("Keep provenance close at hand.")}),a.jsx("p",{className:"mt-3 text-sm text-stone-300",children:s("Use the notes field to document acquisition details, restoration work, or exhibition history alongside metadata.")}),(0,a.jsxs)("div",{className:"mt-6 flex items-center gap-3 text-xs text-stone-300",children:[a.jsx(d.Z,{className:"h-4 w-4 text-amber-300"}),s("Metadata fields are validated before saving.")]})]})]})]})]})}},7143:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=s(8570);let r=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/items/new/page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/items/new/page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[716,697,419,449,373,669],()=>s(43));module.exports=a})();