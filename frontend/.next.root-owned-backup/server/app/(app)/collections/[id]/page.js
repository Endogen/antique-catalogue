(()=>{var e={};e.id=217,e.ids=[217],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},195:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(1838),s(639),s(5866),s(9157);var a=s(3191),r=s(8716),l=s(7922),n=s.n(l),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(app)",{children:["collections",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1838)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,639)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9157)),"/home/endogen/projects/antique-catalogue/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/page.tsx"],x="/(app)/collections/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/collections/[id]/page",pathname:"/collections/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6871:(e,t,s)=>{Promise.resolve().then(s.bind(s,1824))},1824:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(326),r=s(7577),l=s(434),n=s(5047),i=s(6333),o=s(3734),d=s(3855),c=s(6557);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,c.Z)("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);var m=s(1468),u=s(8122),h=s(8307);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,c.Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var f=s(765),g=s(4019),b=s(6407),j=s(6115),y=s(772),v=s(6824);let N=e=>[{label:e("Newest first"),value:"-created_at"},{label:e("Oldest first"),value:"created_at"},{label:e("Name A to Z"),value:"name"},{label:e("Name Z to A"),value:"-name"}],w=e=>({text:e("Text"),number:e("Number"),date:e("Date"),timestamp:e("Timestamp"),checkbox:e("Checkbox"),select:e("Select")}),k=e=>[...e].sort((e,t)=>e.position-t.position||e.id-t.id),_=e=>{let t=new Map;return e.forEach(e=>{let s=e.trim();if(!s)return;let a=s.toLowerCase();t.has(a)||t.set(a,s)}),Array.from(t.values())},C=e=>e&&Array.isArray(e.options)?_(e.options.filter(e=>"string"==typeof e)):[];function M(){let e=(0,n.useParams)(),t=(0,n.useSearchParams)(),{t:s,locale:c}=(0,j.Q)(),_=Array.isArray(e?.id)?e.id[0]:e?.id,M=r.useMemo(()=>N(s),[s]),S=r.useMemo(()=>w(s),[s]),[P,Z]=r.useState({status:"loading"}),[z,A]=r.useState({status:"loading",data:[]}),[L,R]=r.useState({status:"loading",data:[],hasMore:!1}),[$,q]=r.useState(""),[E,D]=r.useState("-created_at"),[T,U]=r.useState([]),[W,O]=r.useState(""),[F,I]=r.useState(""),[H,Y]=r.useState(null),[G,B]=r.useState(0),[Q,V]=r.useState(!1),[K,X]=r.useState(null),[J,ee]=r.useState(!1),[et,es]=r.useState(!1),[ea,er]=r.useState(null),[el,en]=r.useState("true"===t.get("include_drafts")),[ei,eo]=r.useState(null),ed=r.useRef(0),ec=r.useCallback(e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?e:new Intl.DateTimeFormat(c,{month:"short",day:"numeric",year:"numeric"}).format(t)},[c]),ex=r.useCallback(e=>null==e?"-":"string"==typeof e?e:"number"==typeof e?new Intl.NumberFormat(c).format(e):"boolean"==typeof e?e?s("Yes"):s("No"):Array.isArray(e)?e.join(", "):"object"==typeof e?s("Details"):String(e),[c,s]),em=r.useMemo(()=>k(z.data),[z.data]),eu=r.useMemo(()=>[...M,...em.flatMap(e=>[{label:s("Metadata: {field} (asc)",{field:e.name}),value:`metadata:${e.name}`},{label:s("Metadata: {field} (desc)",{field:e.name}),value:`-metadata:${e.name}`}])],[M,em,s]),eh=r.useMemo(()=>em.find(e=>String(e.id)===String(W)),[em,W]),ep=r.useMemo(()=>eh&&"select"===eh.field_type?C(eh.options):[],[eh]);r.useEffect(()=>{if(!eh){I("");return}if("checkbox"===eh.field_type){I("true");return}if("select"===eh.field_type){I(ep[0]??"");return}I("")},[eh,ep]),r.useEffect(()=>{Y(null)},[W,F]);let ef=r.useCallback(async()=>{if(!_){Z({status:"error",error:"Collection ID was not provided."});return}Z(e=>({...e,status:"loading",error:void 0}));try{let e=await v.Wo.get(_);Z({status:"ready",data:e})}catch(e){Z({status:"error",error:(0,v.k0)(e)?e.detail:"We couldn't load this collection."})}},[_]),eg=r.useCallback(async()=>{if(!_){A({status:"error",data:[],error:"Collection ID was not provided."});return}A(e=>({...e,status:"loading",error:void 0}));try{let e=await v.cK.list(_);A({status:"ready",data:e})}catch(e){A({status:"error",data:[],error:(0,v.k0)(e)?e.detail:"We couldn't load the schema fields."})}},[_]);r.useEffect(()=>{ef(),eg()},[ef,eg]);let eb=r.useCallback(async()=>{if(_)try{let e=await v.Y4.collectionStatus(_);ee(e.starred),Z(t=>"ready"===t.status&&t.data?{...t,data:{...t.data,star_count:e.star_count}}:t)}catch(e){(0,v.k0)(e)&&404===e.status||er((0,v.k0)(e)?e.detail:"We couldn't update star status.")}},[_]);r.useEffect(()=>{eb()},[eb]),r.useEffect(()=>{_&&(async()=>{try{let e=await v.$Q.session(_);eo(e.draft_count)}catch{}})()},[_,G]);let ej=r.useMemo(()=>T.map(e=>`${e.fieldName}=${e.value}`),[T]);r.useEffect(()=>{if(!_){R({status:"error",data:[],error:"Collection ID was not provided.",hasMore:!1});return}let e=!0,t=setTimeout(()=>{(async()=>{R({status:"loading",data:[],error:void 0,hasMore:!1}),X(null);try{let t=await v.zg.list(_,{search:$.trim()||void 0,sort:E,offset:0,limit:12,filters:ej,includeDrafts:el});if(!e)return;R({status:"ready",data:t,hasMore:12===t.length})}catch(t){if(!e)return;R({status:"error",data:[],error:(0,v.k0)(t)?t.detail:"We couldn't load items in this collection.",hasMore:!1})}})()},300);return()=>{e=!1,clearTimeout(t)}},[_,$,E,ej,G,el]);let ey=()=>{ef(),eg(),eb(),er(null),B(e=>e+1)},ev=async()=>{if(_&&!et){er(null),es(!0);try{let e=J?await v.Y4.unstarCollection(_):await v.Y4.starCollection(_);ee(e.starred),Z(t=>"ready"===t.status&&t.data?{...t,data:{...t.data,star_count:e.star_count}}:t)}catch(e){er((0,v.k0)(e)?e.detail:"We couldn't update stars.")}finally{es(!1)}}},eN=e=>{U(t=>t.filter(t=>t.id!==e))},ew=async()=>{if(_&&"ready"===L.status&&L.hasMore&&!Q){V(!0),X(null);try{let e=await v.zg.list(_,{search:$.trim()||void 0,sort:E,offset:L.data.length,limit:12,filters:ej,includeDrafts:el});R(t=>({...t,data:[...t.data,...e],hasMore:12===e.length}))}catch(e){X((0,v.k0)(e)?e.detail:"We couldn't load more items.")}finally{V(!1)}}},ek=L.data.length;return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(y.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(l.default,{href:"/collections",children:[a.jsx(i.Z,{className:"h-4 w-4"}),s("Back to collections")]})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:s("Collection overview")}),a.jsx("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:"ready"===P.status&&P.data?P.data.name:s("Review collection items")}),a.jsx("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:s("Search, filter, and organize the items in this collection.")})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(y.z,{variant:J?"secondary":"outline",onClick:ev,disabled:et,children:[a.jsx(o.Z,{className:`h-4 w-4 ${J?"fill-current":""}`}),J?s("Starred"):s("Star")]}),a.jsx(y.z,{asChild:!0,children:(0,a.jsxs)(l.default,{href:`/collections/${_}/items/new`,children:[a.jsx(d.Z,{className:"h-4 w-4"}),s("Add item")]})}),(ei??0)>0?(0,a.jsxs)(y.z,{variant:el?"secondary":"outline",onClick:()=>en(e=>!e),children:[a.jsx(x,{className:"h-4 w-4"}),el?s("Hide drafts"):s("{count} drafts",{count:ei??0})]}):null,(0,a.jsxs)(y.z,{variant:"outline",onClick:ey,children:[a.jsx(m.Z,{className:"h-4 w-4"}),s("Refresh")]})]})]}),"loading"===P.status?a.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/80 p-8 text-sm text-stone-500","aria-busy":"true",children:s("Loading collection details...")}):"error"===P.status?(0,a.jsxs)("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/80 p-6",children:[a.jsx("p",{className:"text-sm font-medium text-rose-700",children:s("We hit a snag loading this collection.")}),a.jsx("p",{className:"mt-2 text-sm text-rose-600",children:s(P.error??"Please try again.")}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[a.jsx(y.z,{variant:"outline",onClick:ey,children:s("Try again")}),a.jsx(y.z,{variant:"ghost",asChild:!0,children:a.jsx(l.default,{href:"/collections",children:s("Back to collections")})})]})]}):(0,a.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Collection details")}),a.jsx("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:P.data?.name}),a.jsx("p",{className:"mt-3 text-sm text-stone-600",children:P.data?.description??s("Add a description to capture the story behind this collection.")}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3 text-xs",children:[a.jsx("span",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 font-medium ${P.data?.is_public?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:P.data?.is_public?s("Public"):s("Private")}),a.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-stone-200 bg-stone-100 px-3 py-1 text-stone-600",children:s("{count} items loaded",{count:ek})}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-stone-200 bg-stone-100 px-3 py-1 text-stone-600",children:[a.jsx(o.Z,{className:"h-3.5 w-3.5 text-amber-600"}),s("{count} stars",{count:P.data?.star_count??0})]})]}),ea?a.jsx("p",{className:"mt-4 text-sm text-rose-600",children:s(ea)}):null,(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap gap-4 text-sm text-stone-600",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[a.jsx(u.Z,{className:"h-4 w-4 text-amber-600"}),s("Created {date}",{date:ec(P.data?.created_at)})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[a.jsx(m.Z,{className:"h-4 w-4 text-amber-600"}),s("Updated {date}",{date:ec(P.data?.updated_at)})]})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Schema snapshot")}),"loading"===z.status?a.jsx("p",{className:"mt-4 text-sm text-stone-500",children:s("Loading schema fields...")}):"error"===z.status?a.jsx("p",{className:"mt-4 text-sm text-rose-600",children:s(z.error??"We couldn't load schema fields.")}):0===z.data.length?(0,a.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-stone-600",children:[a.jsx("p",{children:s("No schema fields yet.")}),a.jsx(y.z,{size:"sm",variant:"secondary",asChild:!0,children:a.jsx(l.default,{href:`/collections/${_}/settings`,children:s("Define schema")})})]}):(0,a.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-stone-600",children:[a.jsx("p",{children:s("{count} fields defined.",{count:z.data.length})}),(0,a.jsxs)("div",{className:"space-y-2",children:[em.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("span",{className:"font-medium text-stone-900",children:e.name}),a.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-stone-400",children:S[e.field_type]??e.field_type})]},e.id)),em.length>4?a.jsx("p",{className:"text-xs text-stone-400",children:s("+{count} more fields",{count:em.length-4})}):null]}),a.jsx(y.z,{size:"sm",variant:"ghost",asChild:!0,children:a.jsx(l.default,{href:`/collections/${_}/settings`,children:s("Edit schema")})})]})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Items")}),a.jsx("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:s("Collection items")})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(h.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),a.jsx("input",{type:"search",placeholder:s("Search items"),className:"h-10 w-56 rounded-full border border-stone-200 bg-white/90 pl-9 pr-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:$,onChange:e=>q(e.target.value)})]}),a.jsx("select",{className:"h-10 rounded-full border border-stone-200 bg-white/90 px-3 text-sm text-stone-700 shadow-sm focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:E,onChange:e=>D(e.target.value),children:eu.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("Filters")}),a.jsx("h3",{className:"mt-3 text-lg font-semibold text-stone-900",children:s("Refine by metadata")}),a.jsx("p",{className:"mt-2 text-sm text-stone-600",children:s("Add filters using your schema field names and values.")})]}),T.length>0?a.jsx(y.z,{size:"sm",variant:"ghost",onClick:()=>{U([])},children:s("Clear filters")}):null]}),"loading"===z.status?a.jsx("p",{className:"mt-4 text-sm text-stone-500",children:s("Loading available fields...")}):"error"===z.status?a.jsx("p",{className:"mt-4 text-sm text-rose-600",children:s(z.error??"We couldn't load fields for filtering.")}):0===z.data.length?(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm text-stone-600",children:[a.jsx("p",{children:s("Define schema fields before filtering items.")}),a.jsx(y.z,{size:"sm",variant:"secondary",asChild:!0,children:a.jsx(l.default,{href:`/collections/${_}/settings`,children:s("Define schema")})})]}):(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-end gap-3",children:[(0,a.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col gap-2",children:[a.jsx("label",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:s("Field")}),(0,a.jsxs)("select",{className:"h-10 rounded-2xl border border-stone-200 bg-white/90 px-3 text-sm text-stone-700 shadow-sm focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:W,onChange:e=>O(e.target.value),children:[a.jsx("option",{value:"",children:s("Select a field")}),em.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"flex min-w-[200px] flex-1 flex-col gap-2",children:[a.jsx("label",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:s("Value")}),eh?.field_type==="select"?(0,a.jsxs)("select",{className:"h-10 rounded-2xl border border-stone-200 bg-white/90 px-3 text-sm text-stone-700 shadow-sm focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:F,onChange:e=>I(e.target.value),disabled:0===ep.length,children:[a.jsx("option",{value:"",children:s("Select a value")}),ep.map(e=>a.jsx("option",{value:e,children:e},e))]}):eh?.field_type==="checkbox"?(0,a.jsxs)("select",{className:"h-10 rounded-2xl border border-stone-200 bg-white/90 px-3 text-sm text-stone-700 shadow-sm focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:F,onChange:e=>I(e.target.value),children:[a.jsx("option",{value:"true",children:s("True")}),a.jsx("option",{value:"false",children:s("False")})]}):a.jsx("input",{type:eh?.field_type==="number"?"number":eh?.field_type==="date"?"date":eh?.field_type==="timestamp"?"datetime-local":"text",step:eh?.field_type==="number"?"any":void 0,className:"h-10 rounded-2xl border border-stone-200 bg-white/90 px-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",placeholder:s("Enter value"),value:F,onChange:e=>I(e.target.value),disabled:!eh})]}),(0,a.jsxs)(y.z,{variant:"secondary",className:"h-10",onClick:()=>{if(!eh){Y("Select a field to filter.");return}let e=F.trim();if(!e){Y("Enter a value to filter.");return}ed.current+=1,U(t=>[...t,{id:`filter-${ed.current}`,fieldId:eh.id,fieldName:eh.name,value:e}]),I(""),O("")},children:[a.jsx(p,{className:"h-4 w-4"}),s("Add filter")]})]}),H?a.jsx("p",{className:"text-sm text-rose-600",children:s(H)}):null,T.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-stone-200 bg-stone-100 px-3 py-1 text-xs text-stone-600",children:[a.jsx(f.Z,{className:"h-3.5 w-3.5 text-amber-600"}),a.jsx("span",{className:"font-medium text-stone-700",children:e.fieldName}),a.jsx("span",{children:"="}),a.jsx("span",{className:"text-stone-500",children:e.value}),a.jsx("button",{type:"button",className:"text-stone-400 transition hover:text-stone-700",onClick:()=>eN(e.id),"aria-label":s("Remove filter {name}",{name:e.fieldName}),children:a.jsx(g.Z,{className:"h-3.5 w-3.5"})})]},e.id))}):a.jsx("p",{className:"text-sm text-stone-500",children:s("No filters applied. Use the controls above to narrow the list.")})]})]}),"loading"===L.status?a.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/80 p-8 text-sm text-stone-500","aria-busy":"true",children:s("Loading items...")}):"error"===L.status?(0,a.jsxs)("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/80 p-6",children:[a.jsx("p",{className:"text-sm font-medium text-rose-700",children:s("We hit a snag loading items.")}),a.jsx("p",{className:"mt-2 text-sm text-rose-600",children:s(L.error??"Please try again.")}),a.jsx("div",{className:"mt-4",children:a.jsx(y.z,{variant:"outline",onClick:ey,children:s("Try again")})})]}):0===L.data.length?a.jsx("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:s("No items yet")}),a.jsx("h3",{className:"font-display mt-3 text-2xl text-stone-900",children:s("Start capturing your first item.")}),a.jsx("p",{className:"mt-3 max-w-xl text-sm text-stone-600",children:s("Add an item to begin cataloguing metadata and imagery for this collection.")}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[a.jsx(y.z,{asChild:!0,children:a.jsx(l.default,{href:`/collections/${_}/items/new`,children:s("Add item")})}),a.jsx(y.z,{variant:"outline",onClick:ey,children:s("Refresh items")}),a.jsx(y.z,{variant:"ghost",asChild:!0,children:a.jsx(l.default,{href:`/collections/${_}/settings`,children:s("Review schema")})})]})]}),a.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-amber-100 text-amber-700",children:a.jsx(h.Z,{className:"h-8 w-8"})})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:L.data.map(e=>{let t=Object.entries(e.metadata??{}),r=e.image_count??0,l=1===r?s("{count} image",{count:r}):s("{count} images",{count:r}),n=e.star_count??0,i=e.primary_image_id??null,o=t.slice(0,4).map(([e,t])=>({label:e,value:ex(t)}));return a.jsx(b.x,{href:`/collections/${_}/items/${e.id}`,title:e.name,eyebrow:e.is_draft?s("Draft"):s("Item"),createdLabel:s("Added {date}",{date:ec(e.created_at)}),description:e.notes,descriptionFallback:s("No description provided."),metadata:o,metadataFallback:s("No metadata captured yet."),metadataOverflowLabel:s("+{count} more fields",{count:Math.max(t.length-2,0)}),imageSrc:i?v.Rf.url(i,"medium"):null,imageAlt:e.name,imageFallbackLabel:s("No image"),starCount:n,imageCount:r,imageCountLabel:l,isHighlighted:e.is_highlight,highlightClassName:"border-amber-400 ring-2 ring-amber-300/70 shadow-[0_0_0_1px_rgba(251,191,36,0.85),0_0_28px_2px_rgba(217,119,6,0.25)]",openLabel:s("Open")},e.id)})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[K?a.jsx("p",{className:"text-xs text-rose-600",children:s(K)}):null,L.hasMore?a.jsx(y.z,{variant:"outline",disabled:Q,onClick:ew,children:Q?s("Loading more..."):s("Load more items")}):a.jsx("p",{className:"text-xs text-stone-500",children:s("You have reached the end of the list.")})]})]})]})]})}},6407:(e,t,s)=>{"use strict";s.d(t,{x:()=>m});var a=s(326),r=s(434),l=s(6226),n=s(1709),i=s(3734);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s(6557).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var d=s(1708),c=s(7863);let x=(e,t)=>e.length<=t?e:`${e.slice(0,t)}...`;function m({href:e,title:t,eyebrow:s,createdLabel:m,description:u,descriptionFallback:h,metadata:p=[],metadataFallback:f,metadataOverflowLabel:g,imageSrc:b,imageAlt:j,imageFallbackLabel:y,starCount:v,imageCount:N,imageCountLabel:w,isHighlighted:k=!1,highlightClassName:_,onToggleStar:C,isStarred:M=!1,starDisabled:S=!1,openLabel:P,className:Z}){let z=x(t,70),A=u?.trim()?x(u,180):h,L=p.slice(0,2),R=p.length>L.length,$=(0,d.N)(b??null);return(0,a.jsxs)("article",{className:(0,c.cn)("flex h-full min-h-[31rem] flex-col rounded-3xl border border-stone-200 bg-white/90 p-5 shadow-sm",k?_:null,Z),children:[(0,a.jsxs)(r.default,{href:e,className:"flex flex-1 flex-col",children:[a.jsx("div",{className:"h-44 overflow-hidden rounded-2xl border border-stone-100 bg-stone-50",children:$?a.jsx(l.default,{src:$,alt:j??t,width:640,height:352,className:"block h-full w-full object-cover",unoptimized:!0}):(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2 bg-gradient-to-br from-stone-100 via-stone-50 to-amber-100/50 text-stone-500",children:[a.jsx(n.Z,{className:"h-5 w-5 text-amber-700"}),a.jsx("p",{className:"text-xs uppercase tracking-[0.2em]",children:y})]})}),a.jsx("p",{className:"mt-4 text-[10px] font-medium uppercase tracking-[0.3em] text-stone-400",children:s}),a.jsx("h3",{className:"mt-2 min-h-[3.25rem] text-lg font-semibold leading-snug text-stone-900",children:z}),a.jsx("p",{className:"mt-1 min-h-[1.25rem] text-xs text-stone-500",children:m??"\xa0"}),a.jsx("p",{className:"mt-3 min-h-[3.5rem] text-sm text-stone-600",children:A}),a.jsx("div",{className:"mt-4 h-24 rounded-2xl border border-stone-100 bg-stone-50 px-3 py-3 text-xs text-stone-600",children:0===L.length?a.jsx("p",{className:"text-stone-500",children:f}):(0,a.jsxs)("div",{className:"space-y-2",children:[L.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[a.jsx("span",{className:"font-medium text-stone-700",children:x(e.label,24)}),a.jsx("span",{className:"text-right text-stone-500",children:x(e.value,28)})]},`${e.label}-${e.value}`)),R?a.jsx("p",{className:"text-[11px] text-stone-400",children:g??`+${p.length-L.length} more`}):null]})})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:["number"==typeof v?C?(0,a.jsxs)("button",{type:"button",className:(0,c.cn)("inline-flex items-center gap-1 rounded-full border border-stone-200 bg-stone-50 px-2.5 py-1 text-xs font-medium text-stone-600 transition","hover:border-amber-300 hover:text-amber-700",S?"cursor-not-allowed opacity-60":null),onClick:C,disabled:S,children:[a.jsx(i.Z,{className:(0,c.cn)("h-3.5 w-3.5",M?"fill-current text-amber-600":"text-amber-600")}),v]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-stone-200 bg-stone-50 px-2.5 py-1 text-xs font-medium text-stone-600",children:[a.jsx(i.Z,{className:"h-3.5 w-3.5 text-amber-600"}),v]}):null,"number"==typeof N?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-stone-200 bg-stone-50 px-2.5 py-1 text-xs font-medium text-stone-600",children:[a.jsx(n.Z,{className:"h-3.5 w-3.5 text-amber-600"}),"string"==typeof w&&w.trim()?w:N]}):null]}),(0,a.jsxs)(r.default,{href:e,className:"inline-flex items-center gap-1 text-xs font-medium uppercase tracking-[0.2em] text-stone-500 transition hover:text-stone-900",children:[P,a.jsx(o,{className:"h-3.5 w-3.5"})]})]})]})}},1708:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});var a=s(7577);function r(e){let[t,s]=a.useState(null);return a.useEffect(()=>{if(!e){s(e=>(e&&URL.revokeObjectURL(e),null));return}let t=null,a=new AbortController;return(async()=>{try{let r=await fetch(e,{headers:{},cache:"no-store",signal:a.signal});if(!r.ok){s(null);return}let l=await r.blob();t=URL.createObjectURL(l),s(e=>(e&&URL.revokeObjectURL(e),t))}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;s(null)}})(),()=>{a.abort(),t&&URL.revokeObjectURL(t)}},[e]),t}},6333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8122:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},1709:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1468:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},765:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1838:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=s(8570);let r=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/collections/[id]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[716,697,449,373],()=>s(195));module.exports=a})();