(()=>{var e={};e.id=437,e.ids=[437],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4052:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),a(533),a(639),a(5866),a(9157);var s=a(3191),r=a(8716),n=a(7922),l=a.n(n),i=a(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["(app)",{children:["schema-templates",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,533)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,639)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,9157)),"/home/endogen/projects/antique-catalogue/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/[id]/page.tsx"],m="/(app)/schema-templates/[id]/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/schema-templates/[id]/page",pathname:"/schema-templates/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1711:(e,t,a)=>{Promise.resolve().then(a.bind(a,9320))},9320:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(326),r=a(7577),n=a(434),l=a(5047),i=a(6333),d=a(1468),o=a(6519),c=a(8091),m=a(8244),p=a(6115),u=a(772),x=a(6824);let h=(e,t)=>{if(!e)return"-";let a=new Date(e);return Number.isNaN(a.getTime())?e:new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric"}).format(a)};function g(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),{t:a,locale:g}=(0,p.Q)(),j=Array.isArray(e?.id)?e.id[0]:e?.id,[f,y]=r.useState({status:"loading"}),[b,v]=r.useState(""),[N,w]=r.useState(null),[k,_]=r.useState(null),[P,q]=r.useState(!1),[C,S]=r.useState(!1),[T,K]=r.useState(!1),z=r.useCallback(async()=>{if(!j){y({status:"error",error:"Schema template ID was not provided."});return}y(e=>({...e,status:"loading",error:void 0}));try{let e=await x.nK.get(j);y({status:"ready",data:e}),v(e.name)}catch(e){y({status:"error",error:(0,x.k0)(e)?e.detail:"We couldn't load this schema template."})}},[j]);r.useEffect(()=>{z()},[z]);let F=r.useMemo(()=>j?{list:()=>x.nK.listFields(j),create:e=>x.nK.createField(j,e),update:(e,t)=>x.nK.updateField(j,e,t),delete:e=>x.nK.deleteField(j,e),reorder:e=>x.nK.reorderFields(j,e)}:null,[j]),M=async()=>{if(!j||P)return;let e=b.trim();if(!e){w("Template name is required.");return}q(!0),w(null),_(null);try{let t=await x.nK.update(j,{name:e});y({status:"ready",data:t}),v(t.name),_("Template updated.")}catch(e){w((0,x.k0)(e)?e.detail:"We couldn't save the schema template.")}finally{q(!1)}},A=async()=>{if(j&&f.data&&!C&&window.confirm(a('Delete the "{name}" template? This cannot be undone.',{name:f.data.name}))){S(!0),w(null);try{await x.nK.delete(j),t.push("/schema-templates")}catch(e){w((0,x.k0)(e)?e.detail:"We couldn't delete the schema template."),S(!1)}}},D=async()=>{if(j&&!T&&!C){K(!0),w(null);try{let e=await x.nK.copy(j);t.push(`/schema-templates/${e.id}`)}catch(e){w((0,x.k0)(e)?e.detail:"We couldn't copy the schema template."),K(!1)}}};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx(u.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,s.jsxs)(n.default,{href:"/schema-templates",children:[s.jsx(i.Z,{className:"h-4 w-4"}),a("Back to schema templates")]})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:a("Schema template")}),s.jsx("h1",{className:"font-display mt-4 text-3xl text-stone-900",children:"ready"===f.status&&f.data?f.data.name:a("Template details")}),s.jsx("p",{className:"mt-3 max-w-2xl text-sm text-stone-600",children:a("Update this template and reuse it when creating future collections.")})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)(u.z,{variant:"outline",onClick:()=>z(),children:[s.jsx(d.Z,{className:"h-4 w-4"}),a("Refresh")]}),(0,s.jsxs)(u.z,{variant:"ghost",onClick:D,disabled:T||C,children:[s.jsx(o.Z,{className:"h-4 w-4"}),T?a("Copying..."):a("Copy")]}),(0,s.jsxs)(u.z,{variant:"ghost",onClick:A,disabled:C,children:[s.jsx(c.Z,{className:"h-4 w-4"}),C?a("Deleting..."):a("Delete")]})]})]}),"loading"===f.status?s.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/80 p-8 text-sm text-stone-500","aria-busy":"true",children:a("Loading schema template...")}):"error"===f.status?(0,s.jsxs)("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/80 p-6",children:[s.jsx("p",{className:"text-sm font-medium text-rose-700",children:a("We hit a snag loading this schema template.")}),s.jsx("p",{className:"mt-2 text-sm text-rose-600",children:a(f.error??"Please try again.")}),s.jsx("div",{className:"mt-4",children:s.jsx(u.z,{variant:"outline",onClick:()=>z(),children:a("Try again")})})]}):(0,s.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/90 p-6 shadow-sm",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:a("Template details")}),s.jsx("h2",{className:"font-display mt-3 text-2xl text-stone-900",children:a("Manage template identity.")}),s.jsx("p",{className:"mt-3 text-sm text-stone-600",children:a("Template names are searchable during collection creation.")}),N?s.jsx("div",{role:"alert",className:"mt-6 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700",children:a(N)}):null,k?s.jsx("div",{role:"status",className:"mt-6 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:a(k)}):null,(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[s.jsx("label",{className:"text-sm font-medium text-stone-700",htmlFor:"template-name",children:a("Template name")}),s.jsx("input",{id:"template-name",type:"text",value:b,onChange:e=>v(e.target.value),className:"w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200"})]}),s.jsx("div",{className:"mt-6",children:s.jsx(u.z,{onClick:M,disabled:P,children:P?a("Saving changes..."):a("Save changes")})})]}),F?s.jsx(m.U,{api:F}):null]}),(0,s.jsxs)("aside",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-500",children:a("Template snapshot")}),s.jsx("h3",{className:"font-display mt-3 text-2xl text-stone-900",children:a("Quick details")}),(0,s.jsxs)("div",{className:"mt-6 space-y-2 text-sm text-stone-600",children:[s.jsx("p",{children:a("{count} fields",{count:f.data?.field_count??0})}),s.jsx("p",{children:a("Created {date}",{date:h(f.data?.created_at,g)})}),s.jsx("p",{children:a("Updated {date}",{date:h(f.data?.updated_at,g)})})]})]}),(0,s.jsxs)("div",{className:"rounded-3xl border border-stone-900/90 bg-gradient-to-br from-stone-950 via-stone-900 to-stone-800 p-6 text-stone-100 shadow-sm",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-stone-400",children:a("Template behavior")}),s.jsx("p",{className:"mt-3 text-sm text-stone-300",children:a("Collections created from this template get a copy of these fields. Future template edits do not change existing collections.")})]})]})]})]})}},6519:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(6557).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},533:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var s=a(8570);let r=(0,s.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/[id]/page.tsx`),{__esModule:n,$$typeof:l}=r;r.default;let i=(0,s.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/[id]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[716,697,419,449,373,382],()=>a(4052));module.exports=s})();