(()=>{var e={};e.id=594,e.ids=[594],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7285:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(2928),s(639),s(5866),s(9157);var a=s(3191),r=s(8716),n=s(7922),l=s.n(n),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(app)",{children:["schema-templates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2928)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,639)),"/home/endogen/projects/antique-catalogue/frontend/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9157)),"/home/endogen/projects/antique-catalogue/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/page.tsx"],u="/(app)/schema-templates/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(app)/schema-templates/page",pathname:"/schema-templates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6388:(e,t,s)=>{Promise.resolve().then(s.bind(s,8965))},8965:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(326),r=s(7577),n=s(434),l=s(5047),i=s(1468),o=s(8307),d=s(3855),c=s(3810),u=s(6519),m=s(8091),p=s(6115),h=s(772),x=s(6824);let f=(e,t)=>{if(!e)return"-";let s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric"}).format(s)};function g(){let e=(0,l.useRouter)(),{t,locale:s}=(0,p.Q)(),[g,y]=r.useState(""),[b,j]=r.useState(0),[v,w]=r.useState({status:"loading",data:[]}),[N,k]=r.useState(""),[P,q]=r.useState(null),[_,C]=r.useState(!1),[Z,M]=r.useState(null),[S,z]=r.useState(null);r.useEffect(()=>{let e=!0,t=setTimeout(()=>{(async()=>{w(e=>({...e,status:"loading",error:void 0}));try{let t=await x.nK.list({q:g.trim()||void 0,limit:100});if(!e)return;w({status:"ready",data:t})}catch(t){if(!e)return;w(e=>({status:"error",data:e.data,error:(0,x.k0)(t)?t.detail:"We couldn't load your schema templates."}))}})()},250);return()=>{e=!1,clearTimeout(t)}},[g,b]);let T=async()=>{if(_)return;let t=N.trim();if(!t){q("Template name is required.");return}q(null),C(!0);try{let s=await x.nK.create({name:t});k(""),j(e=>e+1),e.push(`/schema-templates/${s.id}`)}catch(e){q((0,x.k0)(e)?e.detail:"We couldn't create the schema template.")}finally{C(!1)}},R=async e=>{if(window.confirm(t('Delete the "{name}" template? This cannot be undone.',{name:e.name}))){M(e.id);try{await x.nK.delete(e.id),w(t=>({...t,data:t.data.filter(t=>t.id!==e.id)}))}catch(e){w(t=>({...t,status:"error",error:(0,x.k0)(e)?e.detail:"We couldn't delete the schema template."}))}finally{M(null)}}},E=async t=>{if(null===S){z(t.id);try{let s=await x.nK.copy(t.id);e.push(`/schema-templates/${s.id}`)}catch(e){w(t=>({...t,status:"error",error:(0,x.k0)(e)?e.detail:"We couldn't copy the schema template."}))}finally{z(null)}}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"rounded-3xl border border-stone-200 bg-white/80 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-amber-700",children:t("Schema templates")}),a.jsx("h1",{className:"font-display mt-3 text-3xl text-stone-900",children:t("Create reusable schema blueprints.")}),a.jsx("p",{className:"mt-2 max-w-2xl text-sm text-stone-600",children:t("Save schema definitions as templates, then apply them when creating new collections.")})]}),(0,a.jsxs)(h.z,{variant:"outline",onClick:()=>j(e=>e+1),children:[a.jsx(i.Z,{className:"h-4 w-4"}),t("Refresh")]})]}),(0,a.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-[1.2fr_1fr]",children:[(0,a.jsxs)("div",{className:"relative self-start",children:[a.jsx(o.Z,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-stone-400"}),a.jsx("input",{type:"search",placeholder:t("Search schema templates"),className:"block h-11 w-full rounded-full border border-stone-200 bg-white pl-9 pr-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200",value:g,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx("input",{type:"text",value:N,onChange:e=>k(e.target.value),placeholder:t("Template name"),className:"h-11 min-w-0 flex-1 rounded-xl border border-stone-200 bg-white px-3 text-sm text-stone-700 shadow-sm transition focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-200"}),(0,a.jsxs)(h.z,{type:"button",onClick:T,disabled:_,children:[a.jsx(d.Z,{className:"h-4 w-4"}),_?t("Creating..."):t("Create template")]})]}),P?a.jsx("p",{className:"text-xs text-rose-600",children:t(P)}):a.jsx("p",{className:"text-xs text-stone-500",children:t("Create a blank template, then add fields in the editor.")})]})]})]}),"loading"===v.status&&0===v.data.length?a.jsx("div",{className:"rounded-3xl border border-dashed border-stone-200 bg-white/70 p-8 text-sm text-stone-500","aria-busy":"true",children:t("Loading schema templates...")}):"error"===v.status&&0===v.data.length?a.jsx("div",{className:"rounded-3xl border border-rose-200 bg-rose-50/70 p-6 text-sm text-rose-700",children:t(v.error??"We couldn't load your schema templates.")}):0===v.data.length?(0,a.jsxs)("div",{className:"rounded-3xl border border-stone-200 bg-white/80 p-8",children:[a.jsx("p",{className:"text-sm font-medium text-stone-700",children:t("No schema templates found.")}),a.jsx("p",{className:"mt-2 text-sm text-stone-500",children:t("Create your first template to speed up new collection setup.")}),a.jsx("div",{className:"mt-6",children:a.jsx(h.z,{asChild:!0,variant:"secondary",children:a.jsx(n.default,{href:"/collections/new",children:t("New collection")})})})]}):a.jsx("section",{className:"grid gap-4 md:grid-cols-2",children:v.data.map(e=>(0,a.jsxs)("article",{className:"rounded-3xl border border-stone-200 bg-white/90 p-5 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-stone-400",children:t("Template")}),a.jsx("h2",{className:"mt-2 text-lg font-semibold text-stone-900",children:e.name})]}),a.jsx("span",{className:"rounded-full border border-stone-200 bg-stone-50 px-3 py-1 text-xs text-stone-600",children:t("{count} fields",{count:e.field_count})})]}),a.jsx("p",{className:"mt-3 text-xs text-stone-500",children:t("Updated {date}",{date:f(e.updated_at,s)})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[a.jsx(h.z,{size:"sm",variant:"secondary",asChild:!0,children:(0,a.jsxs)(n.default,{href:`/schema-templates/${e.id}`,children:[a.jsx(c.Z,{className:"h-4 w-4"}),t("Edit schema")]})}),(0,a.jsxs)(h.z,{size:"sm",variant:"ghost",onClick:()=>E(e),disabled:null!==S,children:[a.jsx(u.Z,{className:"h-4 w-4"}),S===e.id?t("Copying..."):t("Copy")]}),(0,a.jsxs)(h.z,{size:"sm",variant:"ghost",onClick:()=>R(e),disabled:Z===e.id||null!==S,children:[a.jsx(m.Z,{className:"h-4 w-4"}),Z===e.id?t("Deleting..."):t("Delete")]})]})]},e.id))})]})}},6519:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},3810:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1468:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},2928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var a=s(8570);let r=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/page.tsx`),{__esModule:n,$$typeof:l}=r;r.default;let i=(0,a.createProxy)(String.raw`/home/endogen/projects/antique-catalogue/frontend/app/(app)/schema-templates/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[716,697,449,373],()=>s(7285));module.exports=a})();